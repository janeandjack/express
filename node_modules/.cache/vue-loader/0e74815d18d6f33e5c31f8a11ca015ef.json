{"remainingRequest":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\express\\express\\src\\views\\admin\\administration\\EmailList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\黎超超\\express\\express\\src\\views\\admin\\administration\\EmailList.vue","mtime":1603936683971},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUGFnZTQwMSBmcm9tICJAL2NvbXBvbmVudHMvNDAxIjsNCmltcG9ydCBwYWdpbmF0aW9uIGZyb20gIi4uL2NvbXBvbmVudHMvSW5mb1BhZ2luYXRpb24iOw0KZXhwb3J0IGRlZmF1bHQgew0KICBpbmplY3Q6IFsicmVsb2FkIl0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBQYWdlNDAxLA0KICAgIHBhZ2luYXRpb24NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0RW1haWxUZW1wbGF0ZSIsIHsgcGFnZTogMCwgc2l6ZTogMTAgfSk7DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgYWxsRW1haWxUZW1wbGF0ZTogZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYWxsRW1haWxUZW1wbGF0ZTsNCiAgICB9LA0KICAgIHJvbGU6IGZ1bmN0aW9uKCkgew0KICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnJvbGUgPT09ICJBZG1pbi/nrqHnkIblkZgiKSB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvcGVuRGV0YWlsUGFnZShpZCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRBRW1haWxUZW1wbGF0ZSIsIGlkKS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYGVtYWlsRHRlYWlsLyR7aWR9YCk7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBkZWxldGVBbm5vdW5jZW1lbnQoaWQpIHsNCiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruWumuWIoOmZpOatpOWFrOWRiu+8nyIsICLmj5DnpLoiLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB0aGlzLiR0KCJsYW5nLmNvbmZpcm1CdXR0b24iKSwNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogdGhpcy4kdCgibGFuZy5jYW5jbGVCdXR0b24iKSwNCiAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJkZWxldGVFbWFpbFRlbXBsYXRlIiwgaWQpLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMucmVsb2FkKCk7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIHBhZ2VDaGFuZ2UodmFsKSB7DQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRFbWFpbFRlbXBsYXRlIiwgeyBwYWdlOiB2YWwtMSwgc2l6ZTogMTAgfSkNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["EmailList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmailList.vue","sourceRoot":"src/views/admin/administration","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!role\">\r\n      <Page401 />\r\n    </div>\r\n    <div class=\"app-container\" v-if=\"role\">\r\n      <h3 class=\"text-center mt-3 pb-4\">邮件 & 公告列表</h3>\r\n      <el-table\r\n        :data=\"allEmailTemplate\"\r\n        border\r\n        fit\r\n        highlight-current-row\r\n        style=\"width: 98%;margin:0 auto;\"\r\n        v-loading=\"loading\"\r\n      >\r\n        <el-table-column\r\n          prop=\"_id\"\r\n          align=\"center\"\r\n          label=\"ID\"\r\n          width=\"200px\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row._id.substr(-10) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"title\"\r\n          width=\"280px\"\r\n          align=\"center\"\r\n          label=\"标题\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.title }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"type\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"类型\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.type }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"summary\" align=\"center\" label=\"简介\" sortable>\r\n          <template slot-scope=\"scope\">\r\n            <span v-html=\"scope.row.summary\"></span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"importance\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"重要性\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.importance }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"createdAt\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"发布时间\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{\r\n              scope.row.createdAt\r\n                | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n            }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"操作\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              icon=\"el-icon-edit\"\r\n              @click.native=\"openDetailPage(scope.row._id)\"\r\n            >\r\n              Edit\r\n            </el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              icon=\"el-icon-delete\"\r\n              @click.native=\"deleteAnnouncement(scope.row._id)\"\r\n            >\r\n              Delete\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <pagination\r\n      :data=\"allEmailTemplate\"\r\n      class=\"mt-5 mb-5 float-right\"\r\n      @pagechange=\"pageChange\"\r\n      pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n      limitNumber=\"10\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Page401 from \"@/components/401\";\r\nimport pagination from \"../components/InfoPagination\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  components: {\r\n    Page401,\r\n    pagination\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"getEmailTemplate\", { page: 0, size: 10 });\r\n  },\r\n  computed: {\r\n    allEmailTemplate: function() {\r\n      return this.$store.state.allEmailTemplate;\r\n    },\r\n    role: function() {\r\n      if (this.$store.state.role === \"Admin/管理员\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    openDetailPage(id) {\r\n      this.loading = true;\r\n      this.$store.dispatch(\"getAEmailTemplate\", id).then(() => {\r\n        this.$router.push(`emailDteail/${id}`);\r\n        this.loading = false;\r\n      });\r\n    },\r\n    deleteAnnouncement(id) {\r\n      this.$confirm(\"确定删除此公告？\", \"提示\", {\r\n        confirmButtonText: this.$t(\"lang.confirmButton\"),\r\n        cancelButtonText: this.$t(\"lang.cancleButton\"),\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.$store.dispatch(\"deleteEmailTemplate\", id).then(() => {\r\n          this.reload();\r\n          this.$message.success(\"删除成功\");\r\n        });\r\n      });\r\n    },\r\n    pageChange(val) {\r\n        this.$store.dispatch(\"getEmailTemplate\", { page: val-1, size: 10 })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-input {\r\n  padding-right: 100px;\r\n}\r\n.cancel-btn {\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 10px;\r\n}\r\n</style>\r\n"]}]}