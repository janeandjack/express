{"remainingRequest":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\express\\express\\src\\views\\admin\\user\\UserAccountInfo.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"E:\\黎超超\\express\\express\\src\\views\\admin\\user\\UserAccountInfo.vue","mtime":1603936683989},{"path":"E:\\黎超超\\express\\express\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmltZ19kaXYgew0KICB3aWR0aDogMTAwJTsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLm1hc2sgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgd2lkdGg6IDkwcHg7DQogIGhlaWdodDogOTBweDsNCiAgYmFja2dyb3VuZDogdXJsKGh0dHBzOi8vaS41MjExMi5jb20vaWNvbi9qcGcvMjU2LzIwMTkxMDAzLzYxNDEyLzI3MDg0NTcuanBnKTsNCiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluOw0KICBvcGFjaXR5OiAwOw0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQouaW1nX2RpdiBhOmhvdmVyIC5tYXNrIHsNCiAgb3BhY2l0eTogMC43Ow0KfQ0K"},{"version":3,"sources":["UserAccountInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAccountInfo.vue","sourceRoot":"src/views/admin/user","sourcesContent":["<template>\r\n  <div style=\"margin-left:1%;width:98%;\">\r\n    <div class=\"row\">\r\n      <div\r\n        class=\"col-12 col-md-6 col-xl-4\"\r\n      >\r\n        <el-card\r\n          :body-style=\"{ padding: '0px' }\"\r\n          style=\"border-radius:3px; height:auto;\"\r\n          shadow=\"hover\"\r\n        >\r\n          <div\r\n            class=\"border-bottom pt-2 pb-2 pl-3\"\r\n            style=\"font-size:18px;background-color:#F0F3F4;\"\r\n          >\r\n            <span class=\"mb-3\">个人资料</span>\r\n          </div>\r\n          <div class=\"ml-3 mt-3 row\">\r\n            <div class=\"img_div\" style=\"width:100px\">\r\n              <img\r\n                class=\"uploadhover mb-3 border\"\r\n                style=\"width:90px;height:90px;object-fit:cover;border-radius: 50%;\"\r\n                :src=\"userAvatar\"\r\n              />\r\n              <a @click=\"openUploadDialog\">\r\n                <div class=\"mask\"></div>\r\n              </a>\r\n            </div>\r\n            <span style=\"width:calc(100%-100px;);\" class=\"ml-2\">\r\n              <p class=\"mt-4\" style=\"font-size:17px;\">\r\n                {{ UserInfo.username }}\r\n              </p>\r\n              <p style=\"font-size:16px;color:gray\">\r\n                <i class=\"fas fa-medal\"> {{ UserInfo.level }}</i>\r\n              </p>\r\n            </span>\r\n          </div>\r\n          <uploadavatar />\r\n          <div class=\"border-top\">\r\n            <div class=\"ml-3 mr-3 mt-3\">\r\n              <el-collapse-transition>\r\n                <el-form\r\n                  v-show=\"formEdit === false\"\r\n                  :model=\"ruleForm\"\r\n                  ref=\"ruleForm\"\r\n                  label-position=\"left\"\r\n                  label-width=\"110px\"\r\n                >\r\n                  <el-form-item label=\"用户邮箱\">\r\n                    {{ UserInfo.email }}\r\n                  </el-form-item>\r\n                  <el-form-item label=\"用户名\">\r\n                    {{ UserInfo.username }}\r\n                  </el-form-item>\r\n                  <el-form-item label=\"出生日期\">\r\n                    {{ UserInfo.birthday | moment(\"YYYY-MM-DD\") }}\r\n                  </el-form-item>\r\n                  <el-form-item label=\"性别\">\r\n                    <div v-if=\"UserInfo.gender === 'female'\">女</div>\r\n                    <div v-else>男</div>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"联系电话\">\r\n                    {{ UserInfo.phoneNumber }}\r\n                  </el-form-item>\r\n                  <el-form-item label=\"微信\">\r\n                    {{ UserInfo.weixin }}\r\n                  </el-form-item>\r\n                  <el-form-item label=\"QQ\">\r\n                    {{ UserInfo.qq }}\r\n                  </el-form-item>\r\n                  <div class=\"mb-4 text-center\">\r\n                    <el-button\r\n                      icon=\"el-icon-edit\"\r\n                      type=\"primary\"\r\n                      @click=\"editInfo\"\r\n                      >编辑</el-button\r\n                    >\r\n                    <el-button\r\n                      icon=\"el-icon-upload2\"\r\n                      type=\"warning\"\r\n                      @click=\"openUploadDialog\"\r\n                      >上传头像</el-button\r\n                    >\r\n                    <el-button\r\n                      icon=\"el-icons-tools\"\r\n                      type=\"danger\"\r\n                      @click=\"modifyPasswordSign=true\"\r\n                      >修改密码</el-button\r\n                    >\r\n                  </div>\r\n                </el-form>\r\n              </el-collapse-transition>\r\n\r\n              <el-collapse-transition>\r\n                <el-form\r\n                  v-show=\"formEdit === true\"\r\n                  :model=\"ruleForm\"\r\n                  ref=\"ruleForm\"\r\n                  label-position=\"left\"\r\n                  label-width=\"120px\"\r\n                  v-loading=\"loading\"\r\n                >\r\n                  <el-form-item label=\"用户邮箱:\" prop=\"email\">\r\n                    <el-input v-model=\"ruleForm.email\" disabled></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"用户名:\" prop=\"username\">\r\n                    <el-input v-model=\"ruleForm.username\"></el-input>\r\n                  </el-form-item>\r\n                 <el-form-item label=\"出生日期:\" prop=\"birthday\">\r\n                    <el-date-picker\r\n                      v-model=\"ruleForm.birthday\"\r\n                      type=\"date\"\r\n                      placeholder=\"请选择生日\">\r\n                    </el-date-picker>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"性别:\" prop=\"gender\">\r\n                    <el-select v-model=\"ruleForm.gender\" placeholder=\"请选择性别\">\r\n                      <el-option\r\n                        label=\"男\"\r\n                        value=\"male\">\r\n                      </el-option>\r\n                      <el-option\r\n                        label=\"女\"\r\n                        value=\"female\">\r\n                      </el-option>\r\n                    </el-select>\r\n                    \r\n                  </el-form-item>\r\n                  <el-form-item label=\"联系电话:\" prop=\"phoneNumber\">\r\n                    <el-input v-model=\"ruleForm.phoneNumber\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"微信:\" prop=\"weixin\">\r\n                    <el-input v-model=\"ruleForm.weixin\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"QQ:\" prop=\"qq\">\r\n                    <el-input v-model=\"ruleForm.qq\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm\"\r\n                      >更新</el-button\r\n                    >\r\n                    <el-button @click=\"editInfo\">取消</el-button>\r\n                  </el-form-item>\r\n                </el-form>\r\n              </el-collapse-transition>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <div class=\"col-12 col-md-6 col-xl-4 mb-5\">\r\n        <el-card :body-style=\"{ padding: '0px' }\" style=\"border-radius:3px;min-height:154px;\" shadow=\"hover\">\r\n          <div class=\"border-bottom pt-2 pb-2 pl-3\" style=\"font-size:18px;background-color:#F0F3F4;\">\r\n            <span class=\"mb-3\">地址信息</span>\r\n            <el-button icon=\"el-icon-edit\" class=\"float-right mr-1\" type=\"primary\" @click=\"newAddressSign = true\">添加</el-button>\r\n          </div>\r\n          \r\n          <div style=\"font-size:17px;\" class=\"mt-4\">\r\n            <el-collapse-transition>\r\n          <div v-if=\"newAddressSign === true || modifyAddressSign ===true\" class=\"border-bottom\" v-loading=\"loading\">\r\n            <el-form :model=\"newAddressForm\" label-position=\"left\" label-width=\"80px\" class=\"ml-3 mr-3 pt-4 pb-4\">\r\n                    <el-form-item label=\"国家\">\r\n                        <el-input v-model=\"newAddressForm.ShippingCountry\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"省份\">\r\n                        <el-input v-model=\"newAddressForm.ShippingProvince\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"城市\">\r\n                        <el-input v-model=\"newAddressForm.ShippingCity\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"地址\">\r\n                        <el-input v-model=\"newAddressForm.ShippingAddress\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"邮编\">\r\n                        <el-input v-model=\"newAddressForm.ShippingPostcode\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"姓名\">\r\n                        <el-input v-model=\"newAddressForm.shippingRecevier\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"电话\">\r\n                        <el-input v-model=\"newAddressForm.shippingPhone\" autocomplete=\"off\"></el-input>\r\n                    </el-form-item>\r\n                    <div class=\"text-center\">\r\n                      <el-button type=\"primary\" @click=\"addNewAddress\">确定</el-button>\r\n                      <el-button @click=\"newAddressSign = false;modifyAddressSign=false\">取消</el-button>\r\n                    </div>        \r\n            </el-form>\r\n          </div>\r\n          </el-collapse-transition>\r\n            <div v-if=\"!UserAddressArray !== undefined && UserAddressArray.length == 0 && newAddressSign==false\" class=\"mt-5 text-center\">\r\n              您的地址信息为空\r\n            </div>\r\n            <div v-else class=\"mb-4 mt-4 pl-3 pr-3\">\r\n              <el-collapse accordion>\r\n                <el-collapse-item v-for=\"(addressItem, index) in UserAddressArray\" :key=\"index\">\r\n                  <template slot=\"title\" style=\"height:100px;\">\r\n                    <i class=\"fas fa-address-card text-info mr-2 fa-lg\"></i>\r\n                    地址: {{addressItem.ShippingAddress}} \r\n                  </template>\r\n                  <div class=\"ml-3 mr-3\" style=\"font-size:15px;\">\r\n                    <p>\r\n                      <i class=\"fas fa-globe mr-2 text-success\"></i> 国家/省份: {{addressItem.ShippingCountry}}, {{addressItem.ShippingProvince}}\r\n                    </p>\r\n                    <p>\r\n                      <i class=\"fas fa-city text-success mr-2\"></i>城市: {{addressItem.ShippingCity}}\r\n                    </p>\r\n                    <p>\r\n                      <i class=\"fas fa-map-marked-alt  text-success mr-2\"></i>详细地址: {{addressItem.ShippingAddress}}\r\n                    </p>\r\n                    <p>\r\n                      <i class=\"fas fa-arrows-alt  text-success mr-2\"></i> 邮编: {{addressItem.ShippingPostcode}}\r\n                    </p>\r\n                    <p>\r\n                      <i class=\"fas fa-address-book  text-success mr-2\"></i> 联系信息: {{addressItem.shippingRecevier}}, {{addressItem.shippingPhone}}\r\n                    </p>\r\n                    <div class=\"text-center mt-4\">\r\n                      <el-button type=\"warning\" @click=\"modifyAddress(index)\">修改</el-button>\r\n                      <el-button type=\"info\" @click=\"deleteAddress(index)\">删除</el-button>\r\n                    </div>\r\n                  </div>\r\n                </el-collapse-item>\r\n              </el-collapse>\r\n              \r\n            </div>\r\n          </div>\r\n          \r\n        </el-card>\r\n        \r\n      </div>\r\n\r\n      <div\r\n        class=\"col-12 col-md-6 col-xl-4 mb-5\"\r\n      >\r\n        <el-card\r\n          :body-style=\"{ padding: '0px' }\"\r\n          style=\"border-radius:3px;\"\r\n          shadow=\"hover\"\r\n        >\r\n          <div\r\n            class=\"border-bottom pt-2 pb-2 pl-3\"\r\n            style=\"font-size:18px;background-color:#F0F3F4;\"\r\n          >\r\n            <span class=\"mb-3\">账户信息</span>\r\n          </div>\r\n          <div class=\"mt-4 row\">\r\n            <div class=\"col-7 ml-3\">\r\n              <p><i class=\"fas fa-coins\"></i> 账户余额:\r\n               <span class=\"text-danger ml-1 mr-1\">{{userAccountBalance}}</span>\r\n               元</p>\r\n              <p><i class=\"fas fa-star-half-alt\"></i> 账户积分: ***</p>\r\n              \r\n            </div>\r\n            <div class=\"col-4\">\r\n              <el-button type=\"warning\" @click.native=\"clickToInputAmount\">充值</el-button>\r\n            </div>\r\n            <!-- <p class=\"ml-4\"><i class=\"fas fa-lightbulb ml-2 text-warning\"></i> 可使用微信或者支付宝金充值</p> -->\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n    <el-dialog\r\n        title=\"账户充值\"\r\n        :visible.sync=\"inputAmountSign\"\r\n        width=\"400px\"\r\n        center>\r\n        <div v-if=\"scanQRCode===false\">\r\n          <span class=\"text-center ml-3\" style=\"font-size:16px;\">\r\n              <span class=\"text-danger\">请输入充值金额:</span> \r\n              <el-input-number style=\"width:170px;\" class=\"ml-3\" :step=\"10\" v-model=\"inputAmount\" :min=\"1\" :max=\"Infinity\"></el-input-number>\r\n          </span>\r\n          <div class=\"text-center mt-5\">\r\n            <el-button @click=\"inputAmountSign = false\">取消</el-button>\r\n            <el-button type=\"warning\" @click=\"scanQRCode = true\">确定充值</el-button>\r\n            \r\n          </div>\r\n        </div> \r\n        <div v-if=\"scanQRCode===true\">\r\n          <div class=\"text-danger\" style=\"font-size:16px;\">\r\n            <i class=\"fas fa-bell mr-2\"></i>请扫描微信或支付宝二维码支付\r\n          </div>\r\n          <el-tabs class=\"mt-3\" type=\"border-card\">\r\n            <el-tab-pane>\r\n              <span slot=\"label\"><i class=\"fab fa-weixin text-success\"></i> 微信</span>\r\n              <el-image\r\n                style=\"width: 90%;margin-left:5%;\"\r\n                src = \"/images/weixinCode.png\"\r\n                fit=\"fill\">\r\n              </el-image>\r\n            </el-tab-pane>\r\n            <el-tab-pane>\r\n              <span slot=\"label\"><i class=\"fab fa-alipay text-primary\"></i> 支付宝</span>\r\n              <el-image\r\n                style=\"width: 90%;margin-left:5%;\"\r\n                src=\"https://cdn.pixabay.com/photo/2013/07/12/14/45/qr-code-148732_1280.png\"\r\n                fit=\"fill\">\r\n            </el-image>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n          <div class=\"text-center mt-5\">\r\n            <el-button @click=\"scanQRCode = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"submitSaveAmount\">确定</el-button>\r\n          </div>\r\n        </div> \r\n    </el-dialog>\r\n    <el-dialog\r\n        title=\"修改密码\"\r\n        :visible.sync=\"modifyPasswordSign\"\r\n        width=\"400px\"\r\n        center>\r\n        <el-form :model=\"modifyPasswordRuleForm\" status-icon label-width=\"80px\" class=\"demo-ruleForm\">\r\n          <el-form-item label=\"输入密码\">\r\n            <el-input type=\"password\" v-model=\"modifyPasswordRuleForm.pass\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"确认密码\">\r\n            <el-input type=\"password\" v-model=\"modifyPasswordRuleForm.checkpass\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"submitModifyPassword\">提交</el-button>\r\n            <el-button @click=\"resetModifyPassword\">取消</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, onMounted, computed, inject} from \"@vue/composition-api\";\r\nimport uploadavatar from \"@/components/AvatarUpload\";\r\nimport { imageDomain } from \"@/MainAPI.js\";\r\nexport default {\r\n  components: {\r\n    uploadavatar,\r\n  },\r\n  setup(props, { root: { $store, $message, $confirm } }) {\r\n\r\n    onMounted(() => {\r\n      $store.dispatch(\"getUserInfo\");\r\n    });\r\n\r\n    const loading = ref(false);\r\n\r\n    const toReload = inject(\"reload\");\r\n\r\n    const UserInfo = computed(() => {\r\n      return $store.state.userSelf;\r\n    });\r\n\r\n    const userAvatar = computed(()=>{\r\n      return imageDomain+UserInfo.value.avatar\r\n    });\r\n\r\n    const UserAddressArray = computed(() => {\r\n      return UserInfo.value.address;\r\n    });\r\n\r\n    const userAccountBalance = computed(()=>{\r\n      return $store.state.userSelf.balance;\r\n    });\r\n\r\n    const openUploadDialog = () => {\r\n      $store.commit(\"openDialog\", true);\r\n    };\r\n    const newAddressSign = ref(false);\r\n    const modifyAddressSign = ref(false);\r\n\r\n    const newAddressForm = reactive({\r\n      ShippingCountry: \"\",\r\n      ShippingProvince: \"\",\r\n      ShippingCity: \"\",\r\n      ShippingAddress: \"\",\r\n      ShippingPostcode: \"\",\r\n      shippingPhone: \"\",\r\n      shippingRecevier: \"\",\r\n    });\r\n\r\n    const addNewAddress = () =>{\r\n      if(newAddressForm.ShippingCountry === \"\" || newAddressForm.ShippingProvince === \"\" || newAddressForm.ShippingCity === \"\" || newAddressForm.ShippingAddress === \"\" ||\r\n          newAddressForm.ShippingPostcode === \"\" || newAddressForm.shippingPhone === \"\" || newAddressForm.shippingRecevier === \"\"){\r\n            $message.error(\"请输入完整信息！\");\r\n          }\r\n      else{\r\n        if(newAddressSign.value === true){\r\n          UserAddressArray.value.push(newAddressForm);\r\n          let  data = {\r\n            address: UserAddressArray.value\r\n          };\r\n          loading.value=true;\r\n          $store.dispatch(\"updateUserInfo\", data)\r\n                .then(()=>{\r\n                  $message.success(\"添加新地址成功！\");\r\n                  loading.value=false;\r\n                  toReload();\r\n                })\r\n                .catch(()=>{\r\n                  loading.value=false;\r\n                })\r\n        }\r\n        else if(modifyAddressSign.value === true){\r\n          UserAddressArray.value.splice(modifyIndex.value, 1);\r\n          UserAddressArray.value.push(newAddressForm);\r\n          let  data = {\r\n            address: UserAddressArray.value\r\n          };\r\n          loading.value=true;\r\n          $store.dispatch(\"updateUserInfo\", data)\r\n                .then(()=>{\r\n                  $message.success(\"地址更新成功！\");\r\n                  loading.value=false;\r\n                  toReload();\r\n                })\r\n                .catch(()=>{\r\n                  loading.value=false;\r\n                })\r\n        }\r\n      }\r\n    };\r\n\r\n    const deleteAddress = (index) =>{\r\n      $confirm('确定删除地址?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          loading.value=true;\r\n          UserAddressArray.value.splice(index, 1);\r\n          let  data = {\r\n              address: UserAddressArray.value\r\n            };\r\n            $store.dispatch(\"updateUserInfo\", data)\r\n                  .then(()=>{\r\n                    $message.success(\"删除地址成功！\");\r\n                    loading.value=false;\r\n                    toReload();\r\n                  })\r\n                  .catch(()=>{\r\n                    loading.value=false;\r\n                  })\r\n        }).catch(() => {\r\n          $message({\r\n            type: 'info',\r\n            message: '取消'\r\n          }); \r\n        });\r\n    }\r\n\r\n    const modifyIndex= ref(\"\");\r\n\r\n    const modifyAddress = (index) =>{\r\n      modifyAddressSign.value = true;\r\n      newAddressForm.ShippingCountry = UserAddressArray.value[index].ShippingCountry;\r\n      newAddressForm.ShippingProvince= UserAddressArray.value[index].ShippingProvince;\r\n      newAddressForm.ShippingCity= UserAddressArray.value[index].ShippingCity;\r\n      newAddressForm.ShippingAddress= UserAddressArray.value[index].ShippingAddress;\r\n      newAddressForm.ShippingPostcode= UserAddressArray.value[index].ShippingPostcode;\r\n      newAddressForm.shippingPhone= UserAddressArray.value[index].shippingPhone;\r\n      newAddressForm.shippingRecevier= UserAddressArray.value[index].shippingRecevier;\r\n      modifyIndex.value = index;\r\n    }\r\n\r\n    const ruleForm = reactive({\r\n      email: UserInfo.value.email,\r\n      username: UserInfo.value.username,\r\n      birthday: UserInfo.value.birthday,\r\n      phoneNumber: UserInfo.value.phoneNumber,\r\n      gender: UserInfo.value.gender,\r\n      weixin: UserInfo.value.weixin,\r\n      qq: UserInfo.value.qq,\r\n    });\r\n\r\n    const formEdit = ref(false);\r\n    const passwordhide = ref(true);\r\n    const editInfo = () => {\r\n      formEdit.value = !formEdit.value;\r\n    };\r\n    const switchpsw = () => {\r\n      passwordhide.value = !passwordhide.value;\r\n    };\r\n\r\n    const submitForm = () => {\r\n      if(ruleForm.username === \"\"){\r\n        $message.error(\"用户名不能为空\");\r\n      } \r\n      else{\r\n        loading.value=true;\r\n        $store.dispatch(\"updateUserInfo\", ruleForm)\r\n              .then(()=>{\r\n                $message.success(\"基本信息更新成功！\");\r\n                loading.value=false;\r\n                $store.dispatch(\"getUserInfo\");\r\n              })\r\n              .catch(()=>{\r\n                loading.value=false;\r\n              })\r\n      }\r\n    };\r\n\r\n    const inputAmountSign = ref(false);\r\n    const clickToInputAmount = ()=>{\r\n      inputAmountSign.value = true;\r\n    };\r\n\r\n    const inputAmount = ref(0);\r\n    const scanQRCode = ref(false);\r\n\r\n    const submitSaveAmount = () =>{\r\n      let data = {\r\n        rechargeBalance: inputAmount.value\r\n      };\r\n      $store.dispatch(\"rechargeAccount\", data)\r\n              .then(()=>{\r\n                $message.success(\"账户充值成功！\");\r\n                inputAmountSign.value = false;\r\n                scanQRCode.value = false;\r\n                toReload();\r\n              })\r\n              .catch(()=>{\r\n                loading.value=false;\r\n              })\r\n\r\n    };\r\n\r\n    const modifyPasswordSign = ref(false);\r\n    const modifyPasswordRuleForm = reactive({\r\n      pass: \"\",\r\n      checkpass:\"\",\r\n    });\r\n    const resetModifyPassword = () =>{\r\n      modifyPasswordSign.value = false;\r\n      modifyPasswordRuleForm.pass = \"\";\r\n      modifyPasswordRuleForm.checkpass = \"\";\r\n    };\r\n    const submitModifyPassword = () =>{\r\n      if(modifyPasswordRuleForm.pass === modifyPasswordRuleForm.checkpass){\r\n        $message.success(\"相同\");\r\n        // localStorage.clear();\r\n      }\r\n      else{\r\n        $message.error(\"不同\")\r\n      }\r\n    };\r\n\r\n\r\n\r\n    return {\r\n      loading,\r\n      UserInfo,\r\n      userAvatar,\r\n      UserAddressArray,\r\n\r\n      newAddressSign,\r\n      newAddressForm,\r\n      addNewAddress,\r\n      deleteAddress,\r\n      modifyAddress,\r\n      modifyAddressSign,\r\n\r\n      openUploadDialog,\r\n      ruleForm,\r\n      submitForm,\r\n\r\n      formEdit,\r\n      editInfo,\r\n\r\n      passwordhide,\r\n      switchpsw,\r\n\r\n      userAccountBalance,\r\n\r\n      inputAmountSign,\r\n      clickToInputAmount,\r\n      inputAmount,\r\n      scanQRCode,\r\n      submitSaveAmount,\r\n\r\n      modifyPasswordSign,\r\n      modifyPasswordRuleForm,\r\n      submitModifyPassword,\r\n      resetModifyPassword\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.img_div {\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n.mask {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 90px;\r\n  height: 90px;\r\n  background: url(https://i.52112.com/icon/jpg/256/20191003/61412/2708457.jpg);\r\n  background-size: contain;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n.img_div a:hover .mask {\r\n  opacity: 0.7;\r\n}\r\n</style>\r\n"]}]}