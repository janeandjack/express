{"remainingRequest":"E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\an-express\\src\\views\\admin\\user\\HistoryOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\黎超超\\an-express\\src\\views\\admin\\user\\HistoryOrder.vue","mtime":1603936683985},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjb21wdXRlZCwgb25Nb3VudGVkLCByZWYgfSBmcm9tICJAdnVlL2NvbXBvc2l0aW9uLWFwaSI7DQppbXBvcnQgcGFnaW5hdGlvbiBmcm9tICIuLi9jb21wb25lbnRzL0luZm9QYWdpbmF0aW9uIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIHBhZ2luYXRpb24sDQogIH0sDQogIHNldHVwKHByb3BzLCB7IHJvb3Q6IHsgJHN0b3JlIH0gfSkgew0KICAgIG9uTW91bnRlZCgoKSA9PiB7DQogICAgICAkc3RvcmUuZGlzcGF0Y2goImdldE9yZGVyRm9ybSIsIHsNCiAgICAgICAgc3RhdHVzOiAi5bey562+5pS2IiwNCiAgICAgICAgcGFnZTogIjAiLA0KICAgICAgICBzaXplOiAiNSIsDQogICAgICAgIHN0YXR1czE6ICLlt7Llj5HotKciLA0KICAgICAgfSk7DQogICAgfSk7DQoNCiAgICAvL2RhdGEgZm9yIGRpc3BsYXkNCiAgICBjb25zdCBMaXN0ID0gY29tcHV0ZWQoKCkgPT4gew0KICAgICAgcmV0dXJuICRzdG9yZS5zdGF0ZS5zZWxmb3JkZXJsaXN0Ow0KICAgIH0pOw0KICAgIGNvbnN0IGtleVdvcmQgPSByZWYoIiIpOw0KICAgIGNvbnN0IHJldHVybkRhdGEgPSByZWYoW10pOw0KICAgIGNvbnN0IGhhbmRsZVF1ZXJ5ID0gKCkgPT4gew0KICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgIGtleXdvcmQ6IHsgc2VhcmNoU3RyaW5nOiBrZXlXb3JkLnZhbHVlIH0sDQogICAgICAgIHN0YXR1czogIuW3suetvuaUtiIsDQogICAgICAgIHBhZ2U6ICIwIiwNCiAgICAgICAgc2l6ZTogIjUiLA0KICAgICAgICBzdGF0dXMxOiAi5bey5Y+R6LSnIiwNCiAgICAgIH07DQogICAgICAkc3RvcmUNCiAgICAgICAgLmRpc3BhdGNoKCJzZWFyY2hPcmRlcnNGb3JVc2VyIiwgZGF0YSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIHJldHVybkRhdGEudmFsdWUgPSByZXMuZGF0YTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHt9KTsNCiAgICB9Ow0KICAgIGNvbnN0IGFsbE9yZGVyTGlzdCA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGxldCBkYXRhID0gW107DQogICAgICBpZiAoa2V5V29yZC52YWx1ZSAhPSAiIikgew0KICAgICAgICBkYXRhID0gcmV0dXJuRGF0YS52YWx1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRhdGEgPSBMaXN0LnZhbHVlOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGRhdGEubWFwKChvYmplY3QpID0+IHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBpZDogb2JqZWN0Ll9pZCwNCiAgICAgICAgICBvcmRlckV4cHJlc3NSZXRhaWw6IG9iamVjdC5vcmRlckV4cHJlc3NSZXRhaWwsDQogICAgICAgICAgaW5jb21lUHJpY2U6IG9iamVjdC5pbmNvbWVQcmljZSwNCiAgICAgICAgICBvcmRlckdvb2RzTGlzdDogb2JqZWN0Lm9yZGVyR29vZHNMaXN0LA0KICAgICAgICAgIHNoaXBwaW5nUmVjZXZpZXI6IG9iamVjdC5zaGlwcGluZ1JlY2V2aWVyLA0KICAgICAgICAgIHNoaXBwaW5nQ291bnRyeTogb2JqZWN0LnNoaXBwaW5nQ291bnRyeSwNCiAgICAgICAgICBvcmRlclR5cGU6IG9iamVjdC5vcmRlclR5cGUsDQogICAgICAgICAgb3JkZXJTdGF0dXM6IG9iamVjdC5vcmRlclN0YXR1cywNCiAgICAgICAgICBvcmRlclRpbWU6IG9iamVjdC51cGRhdGVkQXQsDQogICAgICAgICAgb3JkZXJFdmFsdWF0ZTogb2JqZWN0Lm9yZGVyRXZhbHVhdGUsDQogICAgICAgICAgc2hpcHBpbmdOdW1iZXI6IG9iamVjdC5vcmRlclNoaXBwaW5nTnVtYmVyLA0KICAgICAgICB9Ow0KICAgICAgfSk7DQogICAgfSk7DQoNCiAgICAvL3BhZ2luYXRpb24gcGFnZSBjaGFuZ2UNCiAgICBjb25zdCBwYWdlQ2hhbmdlID0gKHZhbCkgPT4gew0KICAgICAgaWYgKGtleVdvcmQudmFsdWUgPT09ICIiKSB7DQogICAgICAgICRzdG9yZS5kaXNwYXRjaCgiZ2V0T3JkZXJGb3JtIiwgew0KICAgICAgICAgIHN0YXR1czogIuW3suWPkei0pyIsDQogICAgICAgICAgcGFnZTogdmFsIC0gMSwNCiAgICAgICAgICBzaXplOiA1LA0KICAgICAgICAgIHN0YXR1czE6ICLlt7Lnrb7mlLYiLA0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgICRzdG9yZQ0KICAgICAgICAgIC5kaXNwYXRjaCgic2VhcmNoT3JkZXJzRm9yVXNlciIsIHsNCiAgICAgICAgICAgIGtleXdvcmQ6IHsgc2VhcmNoU3RyaW5nOiBrZXlXb3JkLnZhbHVlIH0sDQogICAgICAgICAgICBzdGF0dXM6ICLlt7Llj5HotKciLA0KICAgICAgICAgICAgcGFnZTogdmFsIC0gMSwNCiAgICAgICAgICAgIHNpemU6IDUsDQogICAgICAgICAgICBzdGF0dXMxOiAi5bey562+5pS2IiwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIHJldHVybkRhdGEudmFsdWUgPSByZXMuZGF0YTsNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7DQogICAgICB9DQogICAgfTsNCg0KICAgIHJldHVybiB7DQogICAgICBrZXlXb3JkLA0KICAgICAgaGFuZGxlUXVlcnksDQogICAgICBhbGxPcmRlckxpc3QsDQoNCiAgICAgIHBhZ2VDaGFuZ2UsDQogICAgICBMaXN0DQogICAgfTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["HistoryOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"HistoryOrder.vue","sourceRoot":"src/views/admin/user","sourcesContent":["<template>\r\n  <div class=\"ml-4 mr-3\">\r\n    <div>\r\n      <el-breadcrumb\r\n        separator-class=\"el-icon-arrow-right\"\r\n        class=\"border el-breadcrumb-outer\"\r\n      >\r\n        <el-breadcrumb-item class=\"mt-3 ml-3\">订单详情</el-breadcrumb-item>\r\n        <el-breadcrumb-item class=\"mt-3\"\r\n          ><span style=\"color:#f39c12;\"\r\n            ><i class=\"fas fa-warehouse\" /> 历史订单</span\r\n          >\r\n        </el-breadcrumb-item>\r\n        <div class=\"float-right mt-2 mr-3\">\r\n          <el-input\r\n            v-model=\"keyWord\"\r\n            type=\"text\"\r\n            placeholder=\"搜索\"\r\n            class=\"filter-item searchInputWidth\"\r\n            prefix-icon=\"el-icon-search\"\r\n            @input=\"handleQuery\"\r\n            clearable\r\n          />\r\n        </div>\r\n      </el-breadcrumb>\r\n      <div class=\"mt-5\">\r\n        <el-table\r\n          :data=\"allOrderList\"\r\n          class=\"borderRadius\"\r\n          highlight-current-row\r\n          border\r\n        >\r\n          <el-table-column prop=\"id\" label=\"订单号\" align=\"center\" sortable>\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.id.substr(-10) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"retailPriceAndTime\"\r\n            label=\"快递信息\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <p>单号: {{ row.shippingNumber }}</p>\r\n              <p>快递：{{ row.orderExpressRetail }}</p>\r\n              <p>价格：{{ row.incomePrice }}</p>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"orderGoodsList\"\r\n            label=\"包裹详情\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <div v-for=\"(item, index) in row.orderGoodsList\" :key=\"index\">\r\n                <p>\r\n                  {{ item.goodName }}\r\n                </p>\r\n                <hr />\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"shippingRecevier\"\r\n            label=\"收件人\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.shippingRecevier }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"shippingCountry\"\r\n            label=\"运送国家\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.shippingCountry }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderType\"\r\n            label=\"类别\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span v-if=\"row.orderType === 0\">粉末货物</span>\r\n              <span v-if=\"row.orderType === 1\">液体货物</span>\r\n              <span v-if=\"row.orderType === 2\">食品货物</span>\r\n              <span v-if=\"row.orderType === 3\">敏感类</span>\r\n              <span v-if=\"row.orderType === 4\">普通货物</span>\r\n              <span v-if=\"row.orderType === 5\">体积货物</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderTime\"\r\n            label=\"更新时间\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              {{\r\n                row.orderTime\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n              }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderStatus\"\r\n            label=\"订单状态\"\r\n            fixed=\"right\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span v-if=\"row.orderStatus === '已发货'\" class=\"text-danger\">{{\r\n                row.orderStatus\r\n              }}</span>\r\n              <span v-else class=\"text-success\">{{ row.orderStatus }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderEvaluate\"\r\n            label=\"服务评分\"\r\n            fixed=\"right\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              {{ row.orderEvaluate }}\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <pagination\r\n          :data=\"allOrderList\"\r\n          class=\"mt-5 float-right\"\r\n          @pagechange=\"pageChange\"\r\n          pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n          limitNumber=\"5\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"@vue/composition-api\";\r\nimport pagination from \"../components/InfoPagination\";\r\nexport default {\r\n  components: {\r\n    pagination,\r\n  },\r\n  setup(props, { root: { $store } }) {\r\n    onMounted(() => {\r\n      $store.dispatch(\"getOrderForm\", {\r\n        status: \"已签收\",\r\n        page: \"0\",\r\n        size: \"5\",\r\n        status1: \"已发货\",\r\n      });\r\n    });\r\n\r\n    //data for display\r\n    const List = computed(() => {\r\n      return $store.state.selforderlist;\r\n    });\r\n    const keyWord = ref(\"\");\r\n    const returnData = ref([]);\r\n    const handleQuery = () => {\r\n      let data = {\r\n        keyword: { searchString: keyWord.value },\r\n        status: \"已签收\",\r\n        page: \"0\",\r\n        size: \"5\",\r\n        status1: \"已发货\",\r\n      };\r\n      $store\r\n        .dispatch(\"searchOrdersForUser\", data)\r\n        .then((res) => {\r\n          returnData.value = res.data;\r\n        })\r\n        .catch(() => {});\r\n    };\r\n    const allOrderList = computed(() => {\r\n      let data = [];\r\n      if (keyWord.value != \"\") {\r\n        data = returnData.value;\r\n      } else {\r\n        data = List.value;\r\n      }\r\n      return data.map((object) => {\r\n        return {\r\n          id: object._id,\r\n          orderExpressRetail: object.orderExpressRetail,\r\n          incomePrice: object.incomePrice,\r\n          orderGoodsList: object.orderGoodsList,\r\n          shippingRecevier: object.shippingRecevier,\r\n          shippingCountry: object.shippingCountry,\r\n          orderType: object.orderType,\r\n          orderStatus: object.orderStatus,\r\n          orderTime: object.updatedAt,\r\n          orderEvaluate: object.orderEvaluate,\r\n          shippingNumber: object.orderShippingNumber,\r\n        };\r\n      });\r\n    });\r\n\r\n    //pagination page change\r\n    const pageChange = (val) => {\r\n      if (keyWord.value === \"\") {\r\n        $store.dispatch(\"getOrderForm\", {\r\n          status: \"已发货\",\r\n          page: val - 1,\r\n          size: 5,\r\n          status1: \"已签收\",\r\n        });\r\n      } else {\r\n        $store\r\n          .dispatch(\"searchOrdersForUser\", {\r\n            keyword: { searchString: keyWord.value },\r\n            status: \"已发货\",\r\n            page: val - 1,\r\n            size: 5,\r\n            status1: \"已签收\",\r\n          })\r\n          .then((res) => {\r\n            returnData.value = res.data;\r\n          })\r\n          .catch(() => {});\r\n      }\r\n    };\r\n\r\n    return {\r\n      keyWord,\r\n      handleQuery,\r\n      allOrderList,\r\n\r\n      pageChange,\r\n      List\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.el-breadcrumb-outer {\r\n  height: 48px;\r\n  font-size: 15px;\r\n  background-color: #f0f3f4;\r\n  border-radius: 3px;\r\n}\r\n.bottom-margin {\r\n  margin-bottom: 120px;\r\n}\r\n</style>\r\n"]}]}