{"remainingRequest":"E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\an-express\\src\\views\\admin\\administration\\cancelOrderTurnover.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\黎超超\\an-express\\src\\views\\admin\\administration\\cancelOrderTurnover.vue","mtime":1603936683977},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBvbk1vdW50ZWQsIGNvbXB1dGVkLCByZWYsIHJlYWN0aXZlIH0gZnJvbSAiQHZ1ZS9jb21wb3NpdGlvbi1hcGkiOw0KaW1wb3J0IHBhZ2luYXRpb24gZnJvbSAiLi4vY29tcG9uZW50cy9JbmZvUGFnaW5hdGlvbiI7DQovL2ltcG9ydCB7dG9QZXJjZW50fSBmcm9tICcuLi8uLi8uLi91dGlscy9mdW5jdGlvbic7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBwYWdpbmF0aW9uLA0KICB9LA0KDQogIHNldHVwKHByb3BzLCB7IHJvb3Q6IHsgJHN0b3JlLCAkbW9tZW50IH0gfSkgew0KICAgIG9uTW91bnRlZCgoKSA9PiB7DQogICAgICAkc3RvcmUuZGlzcGF0Y2goImdldFBhaWVkQ2FuY2xlT3JkZXJGb3JtIiwgew0KICAgICAgICBwYWdlOiAiMCIsDQogICAgICAgIHNpemU6ICIyMCIsDQogICAgICB9KTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IFBhaWVkQ2FuY2VsT3JkZXJGb3JtID0gY29tcHV0ZWQoKCkgPT4gew0KICAgICAgcmV0dXJuICRzdG9yZS5zdGF0ZS5QYWllZENhbmNlbE9yZGVyRm9ybTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IHRhYmxlRGF0YSA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGxldCBkYXRhID0gW107DQogICAgICAvLyBpZiAoa2V5V29yZC52YWx1ZSAhPSAiIikgew0KICAgICAgLy9kYXRhID0gcmV0dXJuRGF0YS52YWx1ZTsNCiAgICAgIC8vIH0gZWxzZSB7DQogICAgICBkYXRhID0gUGFpZWRDYW5jZWxPcmRlckZvcm0udmFsdWU7DQogICAgICAvLyB9DQogICAgICByZXR1cm4gZGF0YTsNCiAgICB9KTsNCg0KICAgIC8vY29uc3Qga2V5V29yZCA9IHJlZigiIik7DQoNCiAgICAvL2NvbnN0IHJldHVybkRhdGEgPSByZWYoW10pOw0KDQogICAgLy8gY29uc3QgaGFuZGxlUXVlcnkgPSAoKSA9PiB7DQogICAgLy8gICBsZXQgZGF0YSA9IHsNCiAgICAvLyAgICAga2V5d29yZDogeyBzZWFyY2hTdHJpbmc6IGtleVdvcmQudmFsdWUgfSwNCiAgICAvLyAgICAgc3RhdHVzOiAi5bey562+5pS2IiwNCiAgICAvLyAgICAgcGFnZTogMCwNCiAgICAvLyAgICAgc2l6ZTogMjAsDQogICAgLy8gICAgIHN0YXR1czE6ICLlt7Llj5HotKciLA0KICAgIC8vICAgfTsNCiAgICAvLyAgICRzdG9yZQ0KICAgIC8vICAgICAuZGlzcGF0Y2goInNlYXJjaE9yZGVycyIsIGRhdGEpDQogICAgLy8gICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAvLyAgICAgICByZXR1cm5EYXRhLnZhbHVlID0gcmVzLmRhdGE7DQogICAgLy8gICAgIH0pDQogICAgLy8gICAgIC5jYXRjaCgoKSA9PiB7fSk7DQogICAgLy8gfTsNCg0KICAgIGNvbnN0IHBhZ2VDaGFuZ2UgPSAodmFsKSA9PiB7DQogICAgICAvLyBpZiAoa2V5V29yZC52YWx1ZSA9PT0gIiIpIHsNCiAgICAgICRzdG9yZS5kaXNwYXRjaCgiZ2VQYWllZENhbmNsZU9yZGVyRm9ybSIsIHsNCiAgICAgICAgcGFnZTogdmFsIC0gMSwNCiAgICAgICAgc2l6ZTogIjIwIiwNCiAgICAgIH0pOw0KICAgICAgLy8gfSBlbHNlIHsNCiAgICAgIC8vICAgJHN0b3JlDQogICAgICAvLyAgICAgLmRpc3BhdGNoKCJzZWFyY2hPcmRlcnMiLCB7DQogICAgICAvLyAgICAgICBrZXl3b3JkOiB7IHNlYXJjaFN0cmluZzoga2V5V29yZC52YWx1ZSB9LA0KICAgICAgLy8gICAgICAgc3RhdHVzOiAi5bey562+5pS2IiwNCiAgICAgIC8vICAgICAgIHBhZ2U6IHZhbCAtIDEsDQogICAgICAvLyAgICAgICBzaXplOiAyMCwNCiAgICAgIC8vICAgICAgIHN0YXR1czE6ICLlt7Llj5HotKciLA0KICAgICAgLy8gICAgIH0pDQogICAgICAvLyAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgLy8gICAgICAgcmV0dXJuRGF0YS52YWx1ZSA9IHJlcy5kYXRhOw0KICAgICAgLy8gICAgIH0pDQogICAgICAvLyAgICAgLmNhdGNoKCgpID0+IHt9KTsNCiAgICAgIC8vIH0NCiAgICB9Ow0KDQogICAgY29uc3QgZm9ybWF0SnNvbiA9IChmaWx0ZXJWYWwsIGpzb25EYXRhKSA9PiB7DQogICAgICByZXR1cm4ganNvbkRhdGEubWFwKCh2KSA9Pg0KICAgICAgICBmaWx0ZXJWYWwubWFwKChqKSA9PiB7DQogICAgICAgICAgaWYgKGogPT0gInVwZGF0ZWRBdCIgfHwgaiA9PSAiY3JlYXRlZEF0Iikgew0KICAgICAgICAgICAgcmV0dXJuICRtb21lbnQodltqXSkNCiAgICAgICAgICAgICAgLnR6KCJBc2lhL1NoYW5naGFpIikNCiAgICAgICAgICAgICAgLmZvcm1hdCgiWVlZWS1NTS1ERCBISDptbTpzcyIpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gdltqXTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICApOw0KICAgIH07DQogICAgY29uc3QgZG93bmxvYWRMb2FkaW5nID0gcmVmKGZhbHNlKTsNCiAgICBjb25zdCBjYW5jZWxPcmRlclR1cm5vdmVyRGF0YSA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIHJldHVybiAkc3RvcmUuc3RhdGUuY2FuY2VsT3JkZXJUdXJub3ZlckRhdGE7DQogICAgfSk7DQogICAgY29uc3QgaGFuZGxlRG93bmxvYWQgPSAoKSA9PiB7DQogICAgICBsZXQgZnJvbURhdGUgPSAkbW9tZW50KGRhdGVEdXJhdGlvbi52YWx1ZVswXSkNCiAgICAgICAgLnN1YnRyYWN0KDEsICJkYXlzIikNCiAgICAgICAgLmZvcm1hdCgiWVlZWS1NTS1ERCAwMDowMDowMCIpOw0KICAgICAgbGV0IHRvRGF0ZSA9ICRtb21lbnQoZGF0ZUR1cmF0aW9uLnZhbHVlWzFdKQ0KICAgICAgICAuYWRkKDEsICJkYXlzIikNCiAgICAgICAgLmZvcm1hdCgiWVlZWS1NTS1ERCAwMDowMDowMCIpOw0KDQogICAgICAkc3RvcmUNCiAgICAgICAgLmRpc3BhdGNoKCJnZXRDYW5jZWxPcmRlclR1cm5vdmVyIiwgew0KICAgICAgICAgIGZyb21EYXRlOiBmcm9tRGF0ZSwNCiAgICAgICAgICB0b0RhdGU6IHRvRGF0ZSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIGRvd25sb2FkTG9hZGluZy52YWx1ZSA9IHRydWU7DQogICAgICAgICAgaW1wb3J0KCJAL2NvbXBvbmVudHMvRXhwb3J0MkV4Y2VsIikudGhlbigoZXhjZWwpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IHRIZWFkZXIgPSBbDQogICAgICAgICAgICAgICLkvJrlkZjlkI3np7AiLA0KICAgICAgICAgICAgICAi6K6i5Y2V5Y+3IiwNCiAgICAgICAgICAgICAgIuWIm+W7uuaXtumXtCIsDQogICAgICAgICAgICAgICLorqLljZXnirbmgIEiLA0KICAgICAgICAgICAgICAi5Y+W5raI5pe26Ze0IiwNCiAgICAgICAgICAgICAgIuWPlua2iOiuouWNlei0ueeUqCIsDQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgY29uc3QgYSA9IFsNCiAgICAgICAgICAgICAgInVzZXJuYW1lIiwNCiAgICAgICAgICAgICAgIl9pZCIsDQogICAgICAgICAgICAgICJjcmVhdGVkQXQiLA0KICAgICAgICAgICAgICAib3JkZXJTdGF0dXMiLA0KICAgICAgICAgICAgICAidXBkYXRlZEF0IiwNCiAgICAgICAgICAgICAgImNhbmNsZUZlZSIsDQogICAgICAgICAgICBdOw0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGZvcm1hdEpzb24oYSwgY2FuY2VsT3JkZXJUdXJub3ZlckRhdGEudmFsdWUpOw0KICAgICAgICAgICAgZXhjZWwuZXhwb3J0X2pzb25fdG9fZXhjZWwoew0KICAgICAgICAgICAgICBoZWFkZXI6IHRIZWFkZXIsDQogICAgICAgICAgICAgIGRhdGEsDQogICAgICAgICAgICAgIGZpbGVuYW1lOg0KICAgICAgICAgICAgICAgICRtb21lbnQoZnJvbURhdGUpDQogICAgICAgICAgICAgICAgICAuYWRkKDEsICJkYXlzIikNCiAgICAgICAgICAgICAgICAgIC5mb3JtYXQoIllZWVkvTU0vREQiKSArDQogICAgICAgICAgICAgICAgIi0iICsNCiAgICAgICAgICAgICAgICAkbW9tZW50KHRvRGF0ZSkNCiAgICAgICAgICAgICAgICAgIC5zdWJ0cmFjdCgxLCAiZGF5cyIpDQogICAgICAgICAgICAgICAgICAuZm9ybWF0KCJNTS9ERCIpICsNCiAgICAgICAgICAgICAgICAiLSDlj5bmtojorqLljZXmtYHmsLQiLA0KICAgICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsDQogICAgICAgICAgICAgIGJvb2tUeXBlOiAieGxzeCIsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGRvd25sb2FkTG9hZGluZy52YWx1ZSA9IGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9Ow0KICAgIGNvbnN0IGRhdGVEdXJhdGlvbiA9IHJlZigiIik7DQogICAgY29uc3QgcGlja2VyT3B0aW9ucyA9IHJlYWN0aXZlKHsNCiAgICAgIHNob3J0Y3V0czogWw0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIuacgOi/keS4gOWRqCIsDQogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsNCiAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiA3KTsNCiAgICAgICAgICAgIHBpY2tlci4kZW1pdCgicGljayIsIFtzdGFydCwgZW5kXSk7DQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRleHQ6ICLmnIDov5HkuIDkuKrmnIgiLA0KICAgICAgICAgIG9uQ2xpY2socGlja2VyKSB7DQogICAgICAgICAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgc3RhcnQuc2V0VGltZShzdGFydC5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogMzApOw0KICAgICAgICAgICAgcGlja2VyLiRlbWl0KCJwaWNrIiwgW3N0YXJ0LCBlbmRdKTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGV4dDogIuacgOi/keS4ieS4quaciCIsDQogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsNCiAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LmdldFRpbWUoKSAtIDM2MDAgKiAxMDAwICogMjQgKiA5MCk7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoInBpY2siLCBbc3RhcnQsIGVuZF0pOw0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICBdLA0KICAgIH0pOw0KDQogICAgcmV0dXJuIHsNCiAgICAgIC8vIGtleVdvcmQsDQogICAgICAvLyBoYW5kbGVRdWVyeSwNCiAgICAgIHBhZ2VDaGFuZ2UsDQoNCiAgICAgIC8vb3JkZXJMaXN0LA0KICAgICAgdGFibGVEYXRhLA0KICAgICAgZG93bmxvYWRMb2FkaW5nLA0KICAgICAgaGFuZGxlRG93bmxvYWQsDQogICAgICBwaWNrZXJPcHRpb25zLA0KICAgICAgZGF0ZUR1cmF0aW9uLA0KICAgIH07DQogIH0sDQp9Ow0K"},{"version":3,"sources":["cancelOrderTurnover.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cancelOrderTurnover.vue","sourceRoot":"src/views/admin/administration","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <div\r\n        class=\"border pt-2 pb-2 pl-3\"\r\n        style=\"font-size:18px;background-color:#F0F3F4;border-radius:3px;\"\r\n      >\r\n        <span class=\"mb-3\">取消订单</span>\r\n        <!-- <div class=\"float-right mr-3\">\r\n          <el-input\r\n            v-model=\"keyWord\"\r\n            type=\"text\"\r\n            placeholder=\"搜索\"\r\n            class=\"filter-item searchInputWidth\"\r\n            prefix-icon=\"el-icon-search\"\r\n            @input=\"handleQuery\"\r\n            clearable\r\n          />\r\n        </div> -->\r\n        <el-popover\r\n          placement=\"bottom\"\r\n          title=\"选择导出时间\"\r\n          width=\"370\"\r\n          trigger=\"click\"\r\n          class=\"float-right mr-3\"\r\n        >\r\n          <div>\r\n            <el-date-picker\r\n              v-model=\"dateDuration\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :picker-options=\"pickerOptions\"\r\n            >\r\n            </el-date-picker>\r\n            <el-button\r\n              :loading=\"downloadLoading\"\r\n              type=\"primary\"\r\n              @click=\"handleDownload\"\r\n              class=\"float-right mt-3 pl-4 pr-4\"\r\n            >\r\n              导出\r\n            </el-button>\r\n          </div>\r\n          <el-button icon=\"el-icon-document\" type=\"primary\" slot=\"reference\"\r\n            >Excel导出</el-button\r\n          >\r\n        </el-popover>\r\n      </div>\r\n\r\n      <div class=\"mt-5\">\r\n        <!-- <pre>{{tableData}}</pre> -->\r\n        <el-table\r\n          :data=\"tableData\"\r\n          class=\"borderRadius\"\r\n          highlight-current-row\r\n          border\r\n        >\r\n          <el-table-column\r\n            prop=\"username\"\r\n            label=\"会员名称\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.username }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"_id\" label=\"订单号\" align=\"center\" sortable>\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row._id.substr(-10) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"createdAt\"\r\n            label=\"创建时间\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{\r\n                row.createdAt\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"orderStatus\"\r\n            label=\"订单状态\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span class=\"text-danger\">{{ row.orderStatus }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"updatedAt\"\r\n            label=\"取消时间\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{\r\n                row.updatedAt\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"cancleFee\"\r\n            label=\"取消订单费用\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.cancleFee }}</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!-- <el-button @click=\"exportFile\">下载</el-button> -->\r\n        <pagination\r\n          :data=\"tableData\"\r\n          class=\"mt-5 mb-5 float-right\"\r\n          @pagechange=\"pageChange\"\r\n          pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n          limitNumber=\"20\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref, reactive } from \"@vue/composition-api\";\r\nimport pagination from \"../components/InfoPagination\";\r\n//import {toPercent} from '../../../utils/function';\r\nexport default {\r\n  components: {\r\n    pagination,\r\n  },\r\n\r\n  setup(props, { root: { $store, $moment } }) {\r\n    onMounted(() => {\r\n      $store.dispatch(\"getPaiedCancleOrderForm\", {\r\n        page: \"0\",\r\n        size: \"20\",\r\n      });\r\n    });\r\n\r\n    const PaiedCancelOrderForm = computed(() => {\r\n      return $store.state.PaiedCancelOrderForm;\r\n    });\r\n\r\n    const tableData = computed(() => {\r\n      let data = [];\r\n      // if (keyWord.value != \"\") {\r\n      //data = returnData.value;\r\n      // } else {\r\n      data = PaiedCancelOrderForm.value;\r\n      // }\r\n      return data;\r\n    });\r\n\r\n    //const keyWord = ref(\"\");\r\n\r\n    //const returnData = ref([]);\r\n\r\n    // const handleQuery = () => {\r\n    //   let data = {\r\n    //     keyword: { searchString: keyWord.value },\r\n    //     status: \"已签收\",\r\n    //     page: 0,\r\n    //     size: 20,\r\n    //     status1: \"已发货\",\r\n    //   };\r\n    //   $store\r\n    //     .dispatch(\"searchOrders\", data)\r\n    //     .then((res) => {\r\n    //       returnData.value = res.data;\r\n    //     })\r\n    //     .catch(() => {});\r\n    // };\r\n\r\n    const pageChange = (val) => {\r\n      // if (keyWord.value === \"\") {\r\n      $store.dispatch(\"gePaiedCancleOrderForm\", {\r\n        page: val - 1,\r\n        size: \"20\",\r\n      });\r\n      // } else {\r\n      //   $store\r\n      //     .dispatch(\"searchOrders\", {\r\n      //       keyword: { searchString: keyWord.value },\r\n      //       status: \"已签收\",\r\n      //       page: val - 1,\r\n      //       size: 20,\r\n      //       status1: \"已发货\",\r\n      //     })\r\n      //     .then((res) => {\r\n      //       returnData.value = res.data;\r\n      //     })\r\n      //     .catch(() => {});\r\n      // }\r\n    };\r\n\r\n    const formatJson = (filterVal, jsonData) => {\r\n      return jsonData.map((v) =>\r\n        filterVal.map((j) => {\r\n          if (j == \"updatedAt\" || j == \"createdAt\") {\r\n            return $moment(v[j])\r\n              .tz(\"Asia/Shanghai\")\r\n              .format(\"YYYY-MM-DD HH:mm:ss\");\r\n          } else {\r\n            return v[j];\r\n          }\r\n        })\r\n      );\r\n    };\r\n    const downloadLoading = ref(false);\r\n    const cancelOrderTurnoverData = computed(() => {\r\n      return $store.state.cancelOrderTurnoverData;\r\n    });\r\n    const handleDownload = () => {\r\n      let fromDate = $moment(dateDuration.value[0])\r\n        .subtract(1, \"days\")\r\n        .format(\"YYYY-MM-DD 00:00:00\");\r\n      let toDate = $moment(dateDuration.value[1])\r\n        .add(1, \"days\")\r\n        .format(\"YYYY-MM-DD 00:00:00\");\r\n\r\n      $store\r\n        .dispatch(\"getCancelOrderTurnover\", {\r\n          fromDate: fromDate,\r\n          toDate: toDate,\r\n        })\r\n        .then(() => {\r\n          downloadLoading.value = true;\r\n          import(\"@/components/Export2Excel\").then((excel) => {\r\n            const tHeader = [\r\n              \"会员名称\",\r\n              \"订单号\",\r\n              \"创建时间\",\r\n              \"订单状态\",\r\n              \"取消时间\",\r\n              \"取消订单费用\",\r\n            ];\r\n            const a = [\r\n              \"username\",\r\n              \"_id\",\r\n              \"createdAt\",\r\n              \"orderStatus\",\r\n              \"updatedAt\",\r\n              \"cancleFee\",\r\n            ];\r\n            const data = formatJson(a, cancelOrderTurnoverData.value);\r\n            excel.export_json_to_excel({\r\n              header: tHeader,\r\n              data,\r\n              filename:\r\n                $moment(fromDate)\r\n                  .add(1, \"days\")\r\n                  .format(\"YYYY/MM/DD\") +\r\n                \"-\" +\r\n                $moment(toDate)\r\n                  .subtract(1, \"days\")\r\n                  .format(\"MM/DD\") +\r\n                \"- 取消订单流水\",\r\n              autoWidth: true,\r\n              bookType: \"xlsx\",\r\n            });\r\n            downloadLoading.value = false;\r\n          });\r\n        });\r\n    };\r\n    const dateDuration = ref(\"\");\r\n    const pickerOptions = reactive({\r\n      shortcuts: [\r\n        {\r\n          text: \"最近一周\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n        {\r\n          text: \"最近一个月\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n        {\r\n          text: \"最近三个月\",\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n            picker.$emit(\"pick\", [start, end]);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    return {\r\n      // keyWord,\r\n      // handleQuery,\r\n      pageChange,\r\n\r\n      //orderList,\r\n      tableData,\r\n      downloadLoading,\r\n      handleDownload,\r\n      pickerOptions,\r\n      dateDuration,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-breadcrumb-outer {\r\n  height: 48px;\r\n  font-size: 15px;\r\n  background-color: #f0f3f4;\r\n  border-radius: 3px;\r\n}\r\n.bottom-margin {\r\n  margin-bottom: 120px;\r\n}\r\n.dialog-notice {\r\n  color: #f56c6c;\r\n  font-weight: 800;\r\n  margin-left: 42px;\r\n}\r\n.input-width {\r\n  width: 80px;\r\n}\r\n</style>\r\n"]}]}