{"remainingRequest":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\express\\express\\src\\views\\admin\\user\\UserAdvice.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\黎超超\\express\\express\\src\\views\\admin\\user\\UserAdvice.vue","mtime":1603936683989},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICByZWYsDQogIHJlYWN0aXZlLA0KICBpbmplY3QsDQogIG9uTW91bnRlZCwNCiAgY29tcHV0ZWQsDQp9IGZyb20gIkB2dWUvY29tcG9zaXRpb24tYXBpIjsNCmltcG9ydCB7IGltYWdlRG9tYWluIH0gZnJvbSAiQC9NYWluQVBJLmpzIjsNCmltcG9ydCBwYWdpbmF0aW9uIGZyb20gIi4uL2NvbXBvbmVudHMvSW5mb1BhZ2luYXRpb24iOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBwYWdpbmF0aW9uLA0KICB9LA0KICBzZXR1cChwcm9wcywgeyByb290OiB7ICRzdG9yZSwgJG1lc3NhZ2UgfSB9KSB7DQogICAgb25Nb3VudGVkKCgpID0+IHsNCiAgICAgICRzdG9yZS5kaXNwYXRjaCgiZ2V0VXNlckFkdmljZSIsIHsNCiAgICAgICAgcGFnZTogIjAiLA0KICAgICAgICBzaXplOiAiNSIsDQogICAgICB9KTsNCiAgICAgICRzdG9yZS5kaXNwYXRjaCgiZ2V0VXBUb2tlbiIpOw0KICAgIH0pOw0KICAgIGNvbnN0IGxvYWRpbmcgPSByZWYoZmFsc2UpOw0KICAgIGNvbnN0IGFkdmljZUxpc3QgPSBjb21wdXRlZCgoKSA9PiB7DQogICAgICByZXR1cm4gJHN0b3JlLnN0YXRlLmFkdmljZWxpc3Q7DQogICAgfSk7DQoNCiAgICBjb25zdCB0b1JlbG9hZCA9IGluamVjdCgicmVsb2FkIik7DQogICAgY29uc3QgYWRkQWR2aWNlU2lnbiA9IHJlZihmYWxzZSk7DQoNCiAgICBjb25zdCBpbWFnZVVybCA9IHJlZihbXSk7DQoNCiAgICBjb25zdCBzd2l0Y2hBZGRBZHZpY2UgPSAoKSA9PiB7DQogICAgICBhZGRBZHZpY2VTaWduLnZhbHVlID0gIWFkZEFkdmljZVNpZ24udmFsdWU7DQogICAgfTsNCg0KICAgIGNvbnN0IHJ1bGVGb3JtID0gcmVhY3RpdmUoew0KICAgICAgYWR2aWNlVHlwZTogIm9yZGVyQ29tcGxhaW50IiwNCiAgICAgIGFkdmljZVRpdGxlOiAiIiwNCiAgICAgIGFkdmljZUNvbnRlbnQ6ICIiLA0KICAgICAgZXZpZGVudFBpY3R1cmU6IFtdLA0KICAgIH0pOw0KDQogICAgY29uc3QgYWRkQWR2aWNlID0gKCkgPT4gew0KICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgIGFkdmljZV90eXBlOiBydWxlRm9ybS5hZHZpY2VUeXBlLA0KICAgICAgICBhZHZpY2VfdGl0bGU6IHJ1bGVGb3JtLmFkdmljZVRpdGxlLA0KICAgICAgICBhZHZpY2VfY29udGVudDogcnVsZUZvcm0uYWR2aWNlQ29udGVudCwNCiAgICAgICAgZXZpZGVudF9pbWFnZTogcnVsZUZvcm0uZXZpZGVudFBpY3R1cmUsDQogICAgICB9Ow0KDQogICAgICBpZiAoZGF0YS5hZHZpY2VfdGl0bGUgPT09ICIiKSB7DQogICAgICAgICRtZXNzYWdlLmVycm9yKCLor7floavlhpnmipXor4nkv6Hmga/nmoTmoIfpopgiKTsNCiAgICAgIH0gZWxzZSBpZiAoZGF0YS5hZHZpY2VfY29udGVudCA9PT0gIiIpIHsNCiAgICAgICAgJG1lc3NhZ2UuZXJyb3IoIuivt+Whq+WGmeaKleivieS/oeaBr+eahOWGheWuuSIpOw0KICAgICAgfSBlbHNlIGlmIChkYXRhLmV2aWRlbnRfaW1hZ2UubGVuZ3RoID09PSAwKSB7DQogICAgICAgICRtZXNzYWdlLmVycm9yKCLor7fkuIrkvKDotKfniannmoTkuovmlYXnhafniYciKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlOw0KICAgICAgICAkc3RvcmUNCiAgICAgICAgICAuZGlzcGF0Y2goImNyZWF0ZUFkdmljZSIsIGRhdGEpDQogICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgJG1lc3NhZ2Uuc3VjY2Vzcygi5oqV6K+J5o+Q5Lqk5oiQ5Yqf77yBIik7DQogICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7DQogICAgICAgICAgICB0b1JlbG9hZCgpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9Ow0KDQogICAgY29uc3QgdGFibGVEYXRhID0gY29tcHV0ZWQoKCkgPT4gew0KICAgICAgcmV0dXJuIGFkdmljZUxpc3QudmFsdWUubWFwKChvYmplY3QpID0+IHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBhZHZpY2VEYXRlOiBvYmplY3QuY3JlYXRlZEF0LA0KICAgICAgICAgIGFkdmljZVR5cGU6IG9iamVjdC5hZHZpY2VfdHlwZSwNCiAgICAgICAgICBwaWN0dXJlOiBvYmplY3QuZXZpZGVudF9pbWFnZS5tYXAoKG9iamVjdCkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgc3JjOiBpbWFnZURvbWFpbiArIG9iamVjdCwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSksDQogICAgICAgICAgLy8gcGljdHVyZTogWw0KICAgICAgICAgIC8vICAge3NyYzoiaHR0cHM6Ly9jZG4ucGl4YWJheS5jb20vcGhvdG8vMjAyMC8wMy8zMS8wNy81Ni9mYWNlLW1hc2stNDk4NjU5Nl8xMjgwLmpwZyJ9LA0KICAgICAgICAgIC8vICAge3NyYzoiaHR0cHM6Ly9jZG4ucGl4YWJheS5jb20vcGhvdG8vMjAyMC8wNC8wOS8xOS8yNy9jaGVycnktYmxvc3NvbS01MDIyODExXzEyODAuanBnIn0sDQogICAgICAgICAgLy8gXSwNCiAgICAgICAgICBhZHZpY2VUaXRsZTogb2JqZWN0LmFkdmljZV90aXRsZSwNCiAgICAgICAgICBhZHZpY2VDb250ZW50OiBvYmplY3QuYWR2aWNlX2NvbnRlbnQsDQogICAgICAgICAgYWR2aWNlSW1wcm92ZW1lbnQ6IG9iamVjdC5hZHZpY2VfaW1wcm92ZW1lbnQsDQogICAgICAgIH07DQogICAgICB9KTsNCiAgICB9KTsNCg0KICAgIGNvbnN0IHJ1bGVzID0gcmVhY3RpdmUoew0KICAgICAgYWR2aWNlVHlwZTogWw0KICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5oqV6K+J57G75Z6LIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICBdLA0KICAgICAgYWR2aWNlVGl0bGU6IFsNCiAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeaKleivieagh+mimCIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgXSwNCiAgICAgIGFkdmljZUNvbnRlbnQ6IFsNCiAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWFt+S9k+aKleivieWGheWuuSIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgXSwNCiAgICAgIGV2aWRlbnRQaWN0dXJlOiBbDQogICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6npl67popjnhafniYciLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgIF0sDQogICAgfSk7DQoNCiAgICBjb25zdCB0b2tlbiA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIHJldHVybiAkc3RvcmUuc3RhdGUudG9rZW47DQogICAgfSk7DQoNCiAgICAvL0JlZm9yZSB1cGxvYWRpbmcgcGljdHVyZXMsIHZlcmlmeSB0aGUgZm9ybWF0IGFuZCBzaXplLg0KICAgIGNvbnN0IGJlZm9yZUF2YXRhclVwbG9hZCA9IChmaWxlKSA9PiB7DQogICAgICBsZXQgc2lnbiA9IHRydWU7DQogICAgICBjb25zdCBpbWdBY2NlcHQgPSBbImltYWdlL2dpZiIsICJpbWFnZS9qcGVnIiwgImltYWdlL2pwZyIsICJpbWFnZS9wbmciXTsNCiAgICAgIGNvbnN0IGlzTHQxTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMTsNCiAgICAgIGlmIChpbWdBY2NlcHQuaW5kZXhPZihmaWxlLnR5cGUpID09IC0xKSB7DQogICAgICAgICRtZXNzYWdlLmVycm9yKCLkuIrkvKDmlofku7blupTor6XmmK/lm77niYfmoLzlvI/vvIEiKTsNCiAgICAgICAgc2lnbiA9IGZhbHNlOw0KICAgICAgfQ0KICAgICAgaWYgKCFpc0x0MU0pIHsNCiAgICAgICAgJG1lc3NhZ2UuZXJyb3IoIuWbvueJh+Wkp+Wwj+i2hei/hzFNQuS6huWTpu+8gSIpOw0KICAgICAgICBzaWduID0gZmFsc2U7DQogICAgICB9DQogICAgICByZXR1cm4gc2lnbjsNCiAgICB9Ow0KDQogICAgLy9nZXRCYXNlNjQgaXMgdXNlZCB0byBjb252ZXJ0IGFuIGltYWdlIHRvIGJhc2U2NCBlbmNvZGVkIHN0cmluZw0KICAgIC8vIGNvbnN0IGdldEJhc2U2NCA9IChmaWxlKSA9PiB7DQogICAgLy8gICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgLy8gICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgIC8vICAgICBsZXQgaW1nUmVzdWx0ID0gIiI7DQogICAgLy8gICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KICAgIC8vICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7DQogICAgLy8gICAgICAgaW1nUmVzdWx0ID0gcmVhZGVyLnJlc3VsdDsNCiAgICAvLyAgICAgfTsNCiAgICAvLyAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcikgew0KICAgIC8vICAgICAgIHJlamVjdChlcnJvcik7DQogICAgLy8gICAgIH07DQogICAgLy8gICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHsNCiAgICAvLyAgICAgICByZXNvbHZlKGltZ1Jlc3VsdCk7DQogICAgLy8gICAgIH07DQogICAgLy8gICB9KTsNCiAgICAvLyB9Ow0KDQogICAgLy9nZXQgdGhlIGltYWdlIGJ5IHRoZSBpbWFnZSBVUkwsIGFuZCBjb252ZXJ0IGl0IHRvIGVuY29kZWQgc3RyaW5nDQogICAgLy8gY29uc3QgaGFuZGxlQXZhdGFyU3VjY2VzcyA9IChmaWxlKSA9PiB7DQogICAgLy8gICBpbWFnZVVybC52YWx1ZSA9IFtVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUuZmlsZSldOw0KICAgIC8vICAgZ2V0QmFzZTY0KGZpbGUuZmlsZSkudGhlbigocmVzKSA9PiB7DQogICAgLy8gICAgIHJ1bGVGb3JtLmV2aWRlbnRQaWN0dXJlID0gcmVzOw0KICAgIC8vICAgfSk7DQogICAgLy8gfTsNCiAgICBjb25zdCBoYW5kbGVSZW1vdmUgPSAoZmlsZSkgPT4gew0KICAgICAgbGV0IHJlbW92ZUl0ZW1JbmRleCA9IHJ1bGVGb3JtLmV2aWRlbnRQaWN0dXJlLmluZGV4T2YoZmlsZS5yZXNwb25zZS5rZXkpOw0KICAgICAgcnVsZUZvcm0uZXZpZGVudFBpY3R1cmUuc3BsaWNlKHJlbW92ZUl0ZW1JbmRleCwgMSk7DQogICAgfTsNCiAgICBjb25zdCBoYW5kbGVBdmF0YXJTdWNjZXNzID0gKGZpbGUpID0+IHsNCiAgICAgICRzdG9yZS5kaXNwYXRjaCgiZ2V0VXBUb2tlbiIpLnRoZW4oKCkgPT4gew0KICAgICAgICBydWxlRm9ybS5ldmlkZW50UGljdHVyZS5wdXNoKGZpbGUua2V5KTsNCiAgICAgICAgaW1hZ2VVcmwudmFsdWUucHVzaChmaWxlLmtleSk7DQogICAgICB9KTsNCiAgICB9Ow0KDQogICAgY29uc3QgbGlnaHRib3hWaXNpYmxlID0gcmVmKGZhbHNlKTsNCiAgICBjb25zdCBpbmRleCA9IHJlZigwKTsNCiAgICBjb25zdCBpbWcgPSByZWYoIiIpOw0KICAgIC8vY2xvc2Ugc2lnbmxlIGltYWdlJ3MgbGlnaHRib3gNCiAgICBjb25zdCBoYW5kbGVIaWRlID0gKCkgPT4gew0KICAgICAgbGlnaHRib3hWaXNpYmxlLnZhbHVlID0gZmFsc2U7DQogICAgfTsNCiAgICAvL3Nob3cgc2luZ2xlIGltYWdlJ3MgbGlnaHRib3gNCiAgICBjb25zdCBzaG93TXVsdGlwbGUgPSAocm93LCBpKSA9PiB7DQogICAgICBsaWdodGJveFZpc2libGUudmFsdWUgPSB0cnVlOw0KICAgICAgaW1nLnZhbHVlID0gcm93LnBpY3R1cmU7DQogICAgICBpbmRleC52YWx1ZSA9IGk7DQogICAgfTsNCg0KICAgIGNvbnN0IHBhZ2VDaGFuZ2UgPSAodmFsKSA9PiB7DQogICAgICAkc3RvcmUuZGlzcGF0Y2goImdldFVzZXJBZHZpY2UiLCB7DQogICAgICAgIHBhZ2U6IHZhbCAtIDEsDQogICAgICAgIHNpemU6IDUsDQogICAgICB9KTsNCiAgICB9Ow0KDQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRpbmcsDQogICAgICBhZGRBZHZpY2VTaWduLA0KICAgICAgc3dpdGNoQWRkQWR2aWNlLA0KICAgICAgYWRkQWR2aWNlLA0KDQogICAgICB0YWJsZURhdGEsDQogICAgICBhZHZpY2VMaXN0LA0KICAgICAgcGFnZUNoYW5nZSwNCg0KICAgICAgcnVsZUZvcm0sDQogICAgICBydWxlcywNCg0KICAgICAgaW1hZ2VVcmwsDQogICAgICBiZWZvcmVBdmF0YXJVcGxvYWQsDQogICAgICBoYW5kbGVBdmF0YXJTdWNjZXNzLA0KICAgICAgaGFuZGxlUmVtb3ZlLA0KDQogICAgICBsaWdodGJveFZpc2libGUsDQogICAgICBpbWcsDQogICAgICBpbmRleCwNCiAgICAgIHNob3dNdWx0aXBsZSwNCiAgICAgIGhhbmRsZUhpZGUsDQogICAgICB0b2tlbiwNCiAgICB9Ow0KICB9LA0KfTsNCg=="},{"version":3,"sources":["UserAdvice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserAdvice.vue","sourceRoot":"src/views/admin/user","sourcesContent":["<template>\r\n  <div class=\"ml-4 mb-5\">\r\n    <div>\r\n      <el-breadcrumb\r\n        separator-class=\"el-icon-arrow-right\"\r\n        class=\"border el-breadcrumb-outer\"\r\n      >\r\n        <el-breadcrumb-item class=\"mt-3 ml-3\">投诉与建议</el-breadcrumb-item>\r\n         <el-button\r\n            v-if=\"addAdviceSign === false\"\r\n            type=\"primary\"\r\n            @click=\"switchAddAdvice\"\r\n            class=\"float-right mr-3\"\r\n            style=\"margin-top:5px;\"\r\n          >\r\n            填写建议\r\n            <i class=\"el-icon-warning fa-lg\"></i>\r\n          </el-button>\r\n      </el-breadcrumb>\r\n\r\n      <el-collapse-transition>\r\n        <div class=\"mt-5\" v-if=\"addAdviceSign === true\" v-loading=\"loading\">\r\n          <el-form\r\n            :model=\"ruleForm\"\r\n            :rules=\"rules\"\r\n            ref=\"ruleForm\"\r\n            label-position=\"left\"\r\n            label-width=\"100px\"\r\n            class=\"demo-ruleForm form\"\r\n          >\r\n            <el-form-item label=\"投诉类型\" prop=\"adviceType\">\r\n              <el-radio-group v-model=\"ruleForm.adviceType\">\r\n                <el-radio label=\"投诉\">投诉</el-radio>\r\n                <el-radio label=\"建议\">建议</el-radio>\r\n                <el-radio label=\"其他\">其他</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"投诉标题\" prop=\"adviceTitle\">\r\n              <el-input\r\n                class=\"input-width\"\r\n                v-model=\"ruleForm.adviceTitle\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"投诉内容\" prop=\"adviceContent\">\r\n              <el-input\r\n                class=\"input-width\"\r\n                type=\"textarea\"\r\n                :autosize=\"{ minRows: 3 }\"\r\n                v-model=\"ruleForm.adviceContent\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"投诉照片\" prop=\"evidentPicture\">\r\n              <el-upload\r\n                drag\r\n                action=\"https://upload-z2.qiniup.com\"\r\n                :data=\"token\"\r\n                :on-remove=\"handleRemove\"\r\n                :on-success=\"handleAvatarSuccess\"\r\n                :before-upload=\"beforeAvatarUpload\"\r\n                list-type=\"picture\"\r\n              >\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">\r\n                  拖拽照片 或者 <em>点击上传</em>\r\n                </div>\r\n                <div\r\n                  class=\"el-upload__tip text-danger\"\r\n                  style=\"font-size:14px;\"\r\n                  slot=\"tip\"\r\n                >\r\n                  <i class=\"fas fa-exclamation-circle mr-2\"></i\r\n                  >上传照片只支持PNG，GIF，JPEG 和\r\n                  JPG格式，大小不超过1MB。*每次只能上传一张图片\r\n                </div>\r\n              </el-upload>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div style=\"width:100%;margin-bottom:20px;\">\r\n            <div\r\n              style=\"overflow: hidden;position:relative;margin: auto;left:0;top: 0;width:172px;\"\r\n            >\r\n              <el-button type=\"primary\" @click=\"addAdvice\">\r\n                上传\r\n              </el-button>\r\n              <el-button type=\"warning\" @click=\"switchAddAdvice\">\r\n                取消\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-collapse-transition>\r\n      <div class=\"mt-5\">\r\n        <el-table\r\n          :data=\"tableData\"\r\n          class=\"borderRadius\"\r\n          highlight-current-row\r\n          border\r\n          :default-sort=\"{ prop: 'adviceDate', order: 'descending' }\"\r\n        >\r\n          <el-table-column\r\n            fixed\r\n            prop=\"adviceDate\"\r\n            label=\"投诉时间\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{\r\n                row.adviceDate\r\n                  | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n              }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed\r\n            prop=\"adviceType\"\r\n            label=\"投诉类型\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span class=\"text-danger\" v-if=\"row.adviceType === '投诉'\">投诉</span>\r\n              <span class=\"text-danger\" v-if=\"row.adviceType === '建议'\">建议</span>\r\n              <span class=\"text-danger\" v-if=\"row.adviceType === '其他'\">其他</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"adviceTitle\"\r\n            label=\"投诉标题\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.adviceTitle }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"adviceContent\"\r\n            label=\"投诉详细内容\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span>{{ row.adviceContent }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column\r\n            prop=\"picture\"\r\n            label=\"证据照片\"\r\n            align=\"center\"\r\n            width=\"360\"\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <el-carousel v-if=\"row.picture.length > 1\" indicator-position=\"none\" height=\"150px\">\r\n                <el-carousel-item\r\n                  v-for=\"(object, index) in row.picture\"\r\n                  :key=\"index\"\r\n                >\r\n                  <img\r\n                    :src=\"object.src\"\r\n                    class=\"img-fluid pointer\"\r\n                    @click=\"showMultiple(row, index)\"\r\n                  />\r\n                </el-carousel-item>\r\n              </el-carousel>\r\n              <el-image\r\n                class=\"img-fluid\"\r\n                style=\"height:150px\"\r\n                v-else-if=\"row.picture.length === 1\"\r\n                :src=\"row.picture[0].src\"\r\n                :preview-src-list=\"[row.picture[0].src]\"\r\n                fit=\"cover\"\r\n              ></el-image>\r\n              <span v-else>暂无图片</span>\r\n              <vue-easy-lightbox\r\n                :visible=\"lightboxVisible\"\r\n                :imgs=\"img\"\r\n                :index=\"index\"\r\n                @hide=\"handleHide\"\r\n              ></vue-easy-lightbox>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"adviceImprovement\"\r\n            label=\"改善办法\"\r\n            align=\"center\"\r\n            sortable\r\n          >\r\n            <template slot-scope=\"{ row }\">\r\n              <span class=\"text-success\" v-if=\"row.adviceImprovement\">{{\r\n                row.adviceImprovement\r\n              }}</span>\r\n              <span class=\"text-danger\" v-else>客服正在处理中 敬请期待</span>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <pagination\r\n          :data=\"tableData\"\r\n          class=\"mt-5 float-right\"\r\n          @pagechange=\"pageChange\"\r\n          pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n          limitNumber=\"5\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  ref,\r\n  reactive,\r\n  inject,\r\n  onMounted,\r\n  computed,\r\n} from \"@vue/composition-api\";\r\nimport { imageDomain } from \"@/MainAPI.js\";\r\nimport pagination from \"../components/InfoPagination\";\r\n\r\nexport default {\r\n  components: {\r\n    pagination,\r\n  },\r\n  setup(props, { root: { $store, $message } }) {\r\n    onMounted(() => {\r\n      $store.dispatch(\"getUserAdvice\", {\r\n        page: \"0\",\r\n        size: \"5\",\r\n      });\r\n      $store.dispatch(\"getUpToken\");\r\n    });\r\n    const loading = ref(false);\r\n    const adviceList = computed(() => {\r\n      return $store.state.advicelist;\r\n    });\r\n\r\n    const toReload = inject(\"reload\");\r\n    const addAdviceSign = ref(false);\r\n\r\n    const imageUrl = ref([]);\r\n\r\n    const switchAddAdvice = () => {\r\n      addAdviceSign.value = !addAdviceSign.value;\r\n    };\r\n\r\n    const ruleForm = reactive({\r\n      adviceType: \"orderComplaint\",\r\n      adviceTitle: \"\",\r\n      adviceContent: \"\",\r\n      evidentPicture: [],\r\n    });\r\n\r\n    const addAdvice = () => {\r\n      let data = {\r\n        advice_type: ruleForm.adviceType,\r\n        advice_title: ruleForm.adviceTitle,\r\n        advice_content: ruleForm.adviceContent,\r\n        evident_image: ruleForm.evidentPicture,\r\n      };\r\n\r\n      if (data.advice_title === \"\") {\r\n        $message.error(\"请填写投诉信息的标题\");\r\n      } else if (data.advice_content === \"\") {\r\n        $message.error(\"请填写投诉信息的内容\");\r\n      } else if (data.evident_image.length === 0) {\r\n        $message.error(\"请上传货物的事故照片\");\r\n      } else {\r\n        loading.value = true;\r\n        $store\r\n          .dispatch(\"createAdvice\", data)\r\n          .then(() => {\r\n            $message.success(\"投诉提交成功！\");\r\n            loading.value = false;\r\n            toReload();\r\n          })\r\n          .catch(() => {\r\n            loading.value = false;\r\n          });\r\n      }\r\n    };\r\n\r\n    const tableData = computed(() => {\r\n      return adviceList.value.map((object) => {\r\n        return {\r\n          adviceDate: object.createdAt,\r\n          adviceType: object.advice_type,\r\n          picture: object.evident_image.map((object) => {\r\n            return {\r\n              src: imageDomain + object,\r\n            };\r\n          }),\r\n          // picture: [\r\n          //   {src:\"https://cdn.pixabay.com/photo/2020/03/31/07/56/face-mask-4986596_1280.jpg\"},\r\n          //   {src:\"https://cdn.pixabay.com/photo/2020/04/09/19/27/cherry-blossom-5022811_1280.jpg\"},\r\n          // ],\r\n          adviceTitle: object.advice_title,\r\n          adviceContent: object.advice_content,\r\n          adviceImprovement: object.advice_improvement,\r\n        };\r\n      });\r\n    });\r\n\r\n    const rules = reactive({\r\n      adviceType: [\r\n        { required: true, message: \"请输入投诉类型\", trigger: \"blur\" },\r\n      ],\r\n      adviceTitle: [\r\n        { required: true, message: \"请输入投诉标题\", trigger: \"blur\" },\r\n      ],\r\n      adviceContent: [\r\n        { required: true, message: \"请输入具体投诉内容\", trigger: \"blur\" },\r\n      ],\r\n      evidentPicture: [\r\n        { required: true, message: \"请选择问题照片\", trigger: \"blur\" },\r\n      ],\r\n    });\r\n\r\n    const token = computed(() => {\r\n      return $store.state.token;\r\n    });\r\n\r\n    //Before uploading pictures, verify the format and size.\r\n    const beforeAvatarUpload = (file) => {\r\n      let sign = true;\r\n      const imgAccept = [\"image/gif\", \"image/jpeg\", \"image/jpg\", \"image/png\"];\r\n      const isLt1M = file.size / 1024 / 1024 < 1;\r\n      if (imgAccept.indexOf(file.type) == -1) {\r\n        $message.error(\"上传文件应该是图片格式！\");\r\n        sign = false;\r\n      }\r\n      if (!isLt1M) {\r\n        $message.error(\"图片大小超过1MB了哦！\");\r\n        sign = false;\r\n      }\r\n      return sign;\r\n    };\r\n\r\n    //getBase64 is used to convert an image to base64 encoded string\r\n    // const getBase64 = (file) => {\r\n    //   return new Promise(function(resolve, reject) {\r\n    //     let reader = new FileReader();\r\n    //     let imgResult = \"\";\r\n    //     reader.readAsDataURL(file);\r\n    //     reader.onload = function() {\r\n    //       imgResult = reader.result;\r\n    //     };\r\n    //     reader.onerror = function(error) {\r\n    //       reject(error);\r\n    //     };\r\n    //     reader.onloadend = function() {\r\n    //       resolve(imgResult);\r\n    //     };\r\n    //   });\r\n    // };\r\n\r\n    //get the image by the image URL, and convert it to encoded string\r\n    // const handleAvatarSuccess = (file) => {\r\n    //   imageUrl.value = [URL.createObjectURL(file.file)];\r\n    //   getBase64(file.file).then((res) => {\r\n    //     ruleForm.evidentPicture = res;\r\n    //   });\r\n    // };\r\n    const handleRemove = (file) => {\r\n      let removeItemIndex = ruleForm.evidentPicture.indexOf(file.response.key);\r\n      ruleForm.evidentPicture.splice(removeItemIndex, 1);\r\n    };\r\n    const handleAvatarSuccess = (file) => {\r\n      $store.dispatch(\"getUpToken\").then(() => {\r\n        ruleForm.evidentPicture.push(file.key);\r\n        imageUrl.value.push(file.key);\r\n      });\r\n    };\r\n\r\n    const lightboxVisible = ref(false);\r\n    const index = ref(0);\r\n    const img = ref(\"\");\r\n    //close signle image's lightbox\r\n    const handleHide = () => {\r\n      lightboxVisible.value = false;\r\n    };\r\n    //show single image's lightbox\r\n    const showMultiple = (row, i) => {\r\n      lightboxVisible.value = true;\r\n      img.value = row.picture;\r\n      index.value = i;\r\n    };\r\n\r\n    const pageChange = (val) => {\r\n      $store.dispatch(\"getUserAdvice\", {\r\n        page: val - 1,\r\n        size: 5,\r\n      });\r\n    };\r\n\r\n    return {\r\n      loading,\r\n      addAdviceSign,\r\n      switchAddAdvice,\r\n      addAdvice,\r\n\r\n      tableData,\r\n      adviceList,\r\n      pageChange,\r\n\r\n      ruleForm,\r\n      rules,\r\n\r\n      imageUrl,\r\n      beforeAvatarUpload,\r\n      handleAvatarSuccess,\r\n      handleRemove,\r\n\r\n      lightboxVisible,\r\n      img,\r\n      index,\r\n      showMultiple,\r\n      handleHide,\r\n      token,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.el-breadcrumb-outer {\r\n  height: 48px;\r\n  font-size: 15px;\r\n  background-color: #f0f3f4;\r\n  border-radius: 3px;\r\n}\r\n\r\n.el-upload__input {\r\n  display: none !important;\r\n}\r\n.el-upload {\r\n  width: 100% !important;\r\n}\r\n.el-upload-dragger {\r\n  width: 100% !important;\r\n}\r\n\r\n.form {\r\n  overflow: hidden;\r\n  position: relative;\r\n  width: 60%;\r\n  margin: auto;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n.input-width {\r\n  width: calc(100%-100px);\r\n}\r\n.pointer {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}