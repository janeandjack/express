{"remainingRequest":"E:\\黎超超\\express\\express\\node_modules\\babel-loader\\lib\\index.js!E:\\黎超超\\express\\express\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\黎超超\\express\\express\\src\\store\\request.js","dependencies":[{"path":"E:\\黎超超\\express\\express\\src\\store\\request.js","mtime":1603936683965},{"path":"E:\\黎超超\\express\\express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\express\\express\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHsgdGhyb3dFcnIgfSBmcm9tICJAL3V0aWxzIjsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUiOwppbXBvcnQgeyBtYWluRG9tYWluIH0gZnJvbSAiQC9NYWluQVBJLmpzIjsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIkF1dGhvcml6YXRpb24iKSkgewogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJBdXRob3JpemF0aW9uIik7CiAgfQoKICBjb25maWcudGltZW91dCA9IDEwICogMTAwMDsKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09PSAwKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgibG9nSW5SZXNwb25zZSIsIHJlc3BvbnNlLmRhdGEpOwogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICB9IGVsc2UgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEpOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgaWYgKGVycm9yICYmIGVycm9yLnJlc3BvbnNlKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgibG9nSW5SZXNwb25zZSIsIGVycm9yLnJlc3BvbnNlKTsKICAgIHZhciByZXMgPSB7fTsKICAgIHJlcy5jb2RlID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzOwogICAgcmVzLm1zZyA9IHRocm93RXJyKGVycm9yLnJlc3BvbnNlLnN0YXR1cywgZXJyb3IucmVzcG9uc2UpOwogICAgVnVlLnByb3RvdHlwZS4kbWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6IGVycm9yLnJlc3BvbnNlLmRhdGEsCiAgICAgIHR5cGU6ICJlcnJvciIKICAgIH0pOwoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7CiAgICAgIFZ1ZS5wcm90b3R5cGUuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICfmnYPpmZDlt7Lov4fmnJ/vvIzor7fph43mlrDnmbvpmYbvvIEnLAogICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgfSk7CiAgICAgIFZ1ZS4kcm91dGVyLnB1c2goIi9sb2dpbi9sb2dpbiIpOwogICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgIH0KCiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1ZXN0KG1ldGhvZCwgYWRkcmVzcywgZGF0YSkgewogIHZhciB1cmwgPSAiIi5jb25jYXQobWFpbkRvbWFpbikuY29uY2F0KGFkZHJlc3MpOwogIG1ldGhvZCA9IG1ldGhvZC50b0xvd2VyQ2FzZSgpOwoKICBpZiAobWV0aG9kID09PSAicG9zdCIpIHsKICAgIHJldHVybiBheGlvcy5wb3N0KHVybCwgZGF0YSk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09ICJnZXQiKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09ICJkZWxldGUiKSB7CiAgICByZXR1cm4gYXhpb3MuZGVsZXRlKHVybCwgZGF0YSk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09ICJwdXQiKSB7CiAgICByZXR1cm4gYXhpb3MucHV0KHVybCwgZGF0YSk7CiAgfQp9"},{"version":3,"sources":["E:/黎超超/express/express/src/store/request.js"],"names":["axios","Vue","throwErr","store","mainDomain","interceptors","request","use","config","localStorage","getItem","headers","Authorization","timeout","error","Promise","reject","response","data","code","dispatch","resolve","res","status","msg","prototype","$message","message","type","$router","push","clear","sessionStorage","method","address","url","toLowerCase","post","get","delete","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport Vue from \"vue\";\r\nimport { throwErr } from \"@/utils\";\r\nimport store from \"@/store\";\r\n\r\nimport { mainDomain } from \"@/MainAPI.js\";\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    if (localStorage.getItem(\"Authorization\")) {\r\n      config.headers.Authorization = localStorage.getItem(\"Authorization\");\r\n    }\r\n    config.timeout = 10 * 1000;\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    if (response.data.code === 0) {\r\n      store.dispatch(\"logInResponse\", response.data);\r\n      return Promise.resolve(response.data);\r\n    } else {\r\n      return Promise.reject(response.data);\r\n    }\r\n  },\r\n  (error) => {\r\n    if (error && error.response) {\r\n      store.dispatch(\"logInResponse\", error.response);\r\n      let res = {};\r\n      res.code = error.response.status;\r\n      res.msg = throwErr(error.response.status, error.response);\r\n      Vue.prototype.$message({\r\n        message: error.response.data,\r\n        type: \"error\",\r\n      });\r\n      if (error.response.status == 401) {\r\n        Vue.prototype.$message({\r\n          message: '权限已过期，请重新登陆！',\r\n          type: \"error\",\r\n        });\r\n        Vue.$router.push(\"/login/login\");\r\n        localStorage.clear();\r\n        sessionStorage.clear();\r\n      }\r\n      return Promise.reject(res);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default function request(method, address, data) {\r\n  const url = `${mainDomain}${address}`;\r\n  method = method.toLowerCase();\r\n  if (method === \"post\") {\r\n    return axios.post(url, data);\r\n  } else if (method === \"get\") {\r\n    return axios.get(url);\r\n  } else if (method === \"delete\") {\r\n    return axios.delete(url, data);\r\n  } else if (method === \"put\") {\r\n    return axios.put(url, data);\r\n  }\r\n}\r\n"]}]}