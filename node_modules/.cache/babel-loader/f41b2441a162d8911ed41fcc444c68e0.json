{"remainingRequest":"E:\\黎超超\\an-express\\node_modules\\thread-loader\\dist\\cjs.js!E:\\黎超超\\an-express\\node_modules\\babel-loader\\lib\\index.js!E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\黎超超\\an-express\\src\\views\\admin\\administration\\EmailList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\黎超超\\an-express\\src\\views\\admin\\administration\\EmailList.vue","mtime":1603936683971},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\黎超超\\an-express\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFBhZ2U0MDEgZnJvbSAiQC9jb21wb25lbnRzLzQwMSI7CmltcG9ydCBwYWdpbmF0aW9uIGZyb20gIi4uL2NvbXBvbmVudHMvSW5mb1BhZ2luYXRpb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbInJlbG9hZCJdLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2U0MDE6IFBhZ2U0MDEsCiAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEVtYWlsVGVtcGxhdGUiLCB7CiAgICAgIHBhZ2U6IDAsCiAgICAgIHNpemU6IDEwCiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBhbGxFbWFpbFRlbXBsYXRlOiBmdW5jdGlvbiBhbGxFbWFpbFRlbXBsYXRlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYWxsRW1haWxUZW1wbGF0ZTsKICAgIH0sCiAgICByb2xlOiBmdW5jdGlvbiByb2xlKCkgewogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUucm9sZSA9PT0gIkFkbWluL+euoeeQhuWRmCIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5EZXRhaWxQYWdlOiBmdW5jdGlvbiBvcGVuRGV0YWlsUGFnZShpZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEFFbWFpbFRlbXBsYXRlIiwgaWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiZW1haWxEdGVhaWwvIi5jb25jYXQoaWQpKTsKCiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVBbm5vdW5jZW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUFubm91bmNlbWVudChpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oIuehruWumuWIoOmZpOatpOWFrOWRiu+8nyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHRoaXMuJHQoImxhbmcuY29uZmlybUJ1dHRvbiIpLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHRoaXMuJHQoImxhbmcuY2FuY2xlQnV0dG9uIiksCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goImRlbGV0ZUVtYWlsVGVtcGxhdGUiLCBpZCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIucmVsb2FkKCk7CgogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBwYWdlQ2hhbmdlOiBmdW5jdGlvbiBwYWdlQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0RW1haWxUZW1wbGF0ZSIsIHsKICAgICAgICBwYWdlOiB2YWwgLSAxLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["EmailList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA,OAAA,OAAA,MAAA,kBAAA;AACA,OAAA,UAAA,MAAA,8BAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,QAAA,CADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,UAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GAVA;AAWA,EAAA,OAXA,qBAWA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AAAA,MAAA,IAAA,EAAA,CAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAAA;AACA,GAbA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,gBAAA,EAAA,4BAAA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,gBAAA;AACA,KAHA;AAIA,IAAA,IAAA,EAAA,gBAAA;AACA,UAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,KAAA,WAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA;AACA;AACA;AAVA,GAdA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,EADA,EACA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,mBAAA,EAAA,EAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,uBAAA,EAAA;;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAHA;AAIA,KAPA;AAQA,IAAA,kBARA,8BAQA,EARA,EAQA;AAAA;;AACA,WAAA,QAAA,CAAA,UAAA,EAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,KAAA,EAAA,CAAA,oBAAA,CADA;AAEA,QAAA,gBAAA,EAAA,KAAA,EAAA,CAAA,mBAAA,CAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAIA,IAJA,CAIA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,qBAAA,EAAA,EAAA,EAAA,IAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,MAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAHA;AAIA,OATA;AAUA,KAnBA;AAoBA,IAAA,UApBA,sBAoBA,GApBA,EAoBA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AAAA,QAAA,IAAA,EAAA,GAAA,GAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;AAtBA;AA1BA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"!role\">\r\n      <Page401 />\r\n    </div>\r\n    <div class=\"app-container\" v-if=\"role\">\r\n      <h3 class=\"text-center mt-3 pb-4\">邮件 & 公告列表</h3>\r\n      <el-table\r\n        :data=\"allEmailTemplate\"\r\n        border\r\n        fit\r\n        highlight-current-row\r\n        style=\"width: 98%;margin:0 auto;\"\r\n        v-loading=\"loading\"\r\n      >\r\n        <el-table-column\r\n          prop=\"_id\"\r\n          align=\"center\"\r\n          label=\"ID\"\r\n          width=\"200px\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row._id.substr(-10) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"title\"\r\n          width=\"280px\"\r\n          align=\"center\"\r\n          label=\"标题\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.title }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"type\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"类型\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.type }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"summary\" align=\"center\" label=\"简介\" sortable>\r\n          <template slot-scope=\"scope\">\r\n            <span v-html=\"scope.row.summary\"></span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"importance\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"重要性\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.importance }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"createdAt\"\r\n          width=\"120px\"\r\n          align=\"center\"\r\n          label=\"发布时间\"\r\n          sortable\r\n        >\r\n          <template slot-scope=\"scope\">\r\n            <span>{{\r\n              scope.row.createdAt\r\n                | moment(\"timezone\", \"Asia/Shanghai\", \"YYYY-MM-DD HH:mm:ss\")\r\n            }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column align=\"center\" label=\"操作\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              icon=\"el-icon-edit\"\r\n              @click.native=\"openDetailPage(scope.row._id)\"\r\n            >\r\n              Edit\r\n            </el-button>\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              icon=\"el-icon-delete\"\r\n              @click.native=\"deleteAnnouncement(scope.row._id)\"\r\n            >\r\n              Delete\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <pagination\r\n      :data=\"allEmailTemplate\"\r\n      class=\"mt-5 mb-5 float-right\"\r\n      @pagechange=\"pageChange\"\r\n      pager=\"prev, pager, next, jumper, ->, total, slot\"\r\n      limitNumber=\"10\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Page401 from \"@/components/401\";\r\nimport pagination from \"../components/InfoPagination\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  components: {\r\n    Page401,\r\n    pagination\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.$store.dispatch(\"getEmailTemplate\", { page: 0, size: 10 });\r\n  },\r\n  computed: {\r\n    allEmailTemplate: function() {\r\n      return this.$store.state.allEmailTemplate;\r\n    },\r\n    role: function() {\r\n      if (this.$store.state.role === \"Admin/管理员\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    openDetailPage(id) {\r\n      this.loading = true;\r\n      this.$store.dispatch(\"getAEmailTemplate\", id).then(() => {\r\n        this.$router.push(`emailDteail/${id}`);\r\n        this.loading = false;\r\n      });\r\n    },\r\n    deleteAnnouncement(id) {\r\n      this.$confirm(\"确定删除此公告？\", \"提示\", {\r\n        confirmButtonText: this.$t(\"lang.confirmButton\"),\r\n        cancelButtonText: this.$t(\"lang.cancleButton\"),\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.$store.dispatch(\"deleteEmailTemplate\", id).then(() => {\r\n          this.reload();\r\n          this.$message.success(\"删除成功\");\r\n        });\r\n      });\r\n    },\r\n    pageChange(val) {\r\n        this.$store.dispatch(\"getEmailTemplate\", { page: val-1, size: 10 })\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-input {\r\n  padding-right: 100px;\r\n}\r\n.cancel-btn {\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 10px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/admin/administration"}]}